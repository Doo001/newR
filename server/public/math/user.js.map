{"version":3,"sources":["webpack:///user.js","webpack:///./js/user/common.jsx","webpack:///./js/user/entry.jsx","webpack:///./js/user/login.jsx","webpack:///./js/user/manageuser.jsx","webpack:///./js/user/oplogs.jsx","webpack:///./js/user/stats.jsx","webpack:///./js/user/userinfo.jsx","webpack:///./js/user/userlist.jsx","webpack:///external \"jQuery\"?0cb8","webpack:///external \"Immutable\"?d3b4","webpack:///external \"Global\"?3bd4","webpack:///external \"Raven\"?5a37"],"names":["webpackJsonp","./js/user/common.jsx","module","__webpack_exports__","__webpack_require__","setCurrentNav","current","uid","profile","arguments","length","undefined","navItems","__WEBPACK_IMPORTED_MODULE_2_js_nav__","__WEBPACK_IMPORTED_MODULE_3_global___default","a","user","permissions","filter","p","push","i","d","UserRole","UserModule","UserPermission","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_3_global__","this","key","value","role","kAdmin","kDescDict","1","10","kUser","kAllModules","code","desc","forEach","item","kMathDepartment","kAll","concat","./js/user/entry.jsx","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","__WEBPACK_IMPORTED_MODULE_1_react_dom__","__WEBPACK_IMPORTED_MODULE_1_react_dom___default","__WEBPACK_IMPORTED_MODULE_2_react_router__","__WEBPACK_IMPORTED_MODULE_3__userlist__","__WEBPACK_IMPORTED_MODULE_4__manageuser__","__WEBPACK_IMPORTED_MODULE_5__userinfo__","__WEBPACK_IMPORTED_MODULE_6__login__","__WEBPACK_IMPORTED_MODULE_7__oplogs__","__WEBPACK_IMPORTED_MODULE_8__stats__","render","createElement","history","path","component","document","getElementById","./js/user/login.jsx","UserLogin","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_7_react__","__WEBPACK_IMPORTED_MODULE_7_react___default","__WEBPACK_IMPORTED_MODULE_8_js_quantum__","__WEBPACK_IMPORTED_MODULE_9_css_main_scss__","__WEBPACK_IMPORTED_MODULE_10__config__","__WEBPACK_IMPORTED_MODULE_10__config___default","_React$Component","_this","__proto__","call","genImgSrc","server","Math","random","loginError","_refPass","focus","setState","pass","refreshCode","state","email","window","localStorage","getItem","capacha","remember","ajaxing","imgSrc","_refEmail","_autoFocusInput","evt","target","type","checked","name","codeImg","setAttribute","_this2","preventDefault","post","json","done","res","setItem","authorization","get","encodeURIComponent","g","location","href","props","query","next_url","fail","always","_this3","id","className","src","onSubmit","login","bind","placeholder","required","onChange","handleChange","ref","c","alt","_ref","onClick","data-action","Component","./js/user/manageuser.jsx","AdminEdu","htmlFor","edu","changeEdu","map","eduDesc","Permissions","checkedPermissions","__WEBPACK_IMPORTED_MODULE_12__common__","getPermissionsByModule","perm","indexOf","changePermissions","UserStatSearchBar","AddUser","UpdateUser","UserStatistics","UserStatisticsPage","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default","__WEBPACK_IMPORTED_MODULE_9_immutable__","__WEBPACK_IMPORTED_MODULE_9_immutable___default","__WEBPACK_IMPORTED_MODULE_10_sprintf_js__","__WEBPACK_IMPORTED_MODULE_11_global__","__WEBPACK_IMPORTED_MODULE_11_global___default","UserInfo","tip","isAdd","opType","currentUser","setBind","userId","init","updateUserInfo","changeRole","banUser","addUser","submit","set","kDefault","fromJS","format","setUser","parseInt","delete","updateUser","valid","data","success","loading","update","setTip","alert","_this4","test","put","disabled","inputChange","isAdmin","_id","_React$Component2","_this5","dataReady","statistics","today","Date","monthFirst","getFullYear","getMonth","formatDate","dt","sprintf","getDate","search","apply","defaultDateRange","loadUserInfo","_this6","start","end","_this7","searchCallback","create","typeset","tag","volume","volume_items","review_tag","review_typeset","_React$Component3","params","_React$Component4","_this9","changeHandler","rangeName","_this10","range","getTime","weekFirst","dateFormat","_this11","quickSearch","./js/user/oplogs.jsx","OpLog","opLog","index","__WEBPACK_IMPORTED_MODULE_5_react___default","toLocaleString","ProfileRecentOpLogsPage","UserRecentOpLogsPage","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_5_react__","__WEBPACK_IMPORTED_MODULE_6_immutable__","__WEBPACK_IMPORTED_MODULE_6_immutable___default","__WEBPACK_IMPORTED_MODULE_7_js_quantum__","__WEBPACK_IMPORTED_MODULE_8_global__","__WEBPACK_IMPORTED_MODULE_8_global___default","__WEBPACK_IMPORTED_MODULE_9__common__","RecentOplogs","opLogs","days","results","defaultProps","./js/user/stats.jsx","UsersStatisticsPage","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_8_css_main_scss__","__WEBPACK_IMPORTED_MODULE_9__manageuser__","__WEBPACK_IMPORTED_MODULE_10__common__","stats","dateStrToUnixTime","stat","_renderTr","./js/user/userinfo.jsx","ProfileEditor","UserStats","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_10__manageuser__","UserInfoEditor","newPass","confirmPass","userEdu","userName","showPassForm","updateUserName","updateUserEdu","updateUserPass","btnStatus","invalid","successCallback","update_profile","./js/user/userlist.jsx","__WEBPACK_IMPORTED_MODULE_6_js_quantum__","__WEBPACK_IMPORTED_MODULE_7_css_main_scss__","UserTr","validClass","permi","getPermDesc","showOp","UserList","users","0","exports","jQuery","Immutable","2","Global","4","Raven"],"mappings":"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","file":"user.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"./js/user/common.jsx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = setCurrentNav;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return UserRole; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return UserModule; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return UserPermission; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/classCallCheck.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/createClass.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_js_nav__ = __webpack_require__(\"./js/nav.jsx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_global__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_global___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_global__);\n\n\n\n\n\nfunction setCurrentNav(current, uid) {\n    var profile = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    var navItems = null;\n    if (uid) {\n        navItems = [new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('用户列表', '/users'), new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('全体统计', '/users/statistics'), new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('添加', '/admin/adduser'), new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('编辑', '/user/' + uid)];\n        var permissions = __WEBPACK_IMPORTED_MODULE_3_global___default.a.user.permissions.filter(function (p) {\n            return p < 200;\n        });\n        if (permissions.length) {\n            navItems.push(new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('用户统计', '/user/' + uid + '/statistics'));\n            navItems.push(new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('最近操作', '/user/' + uid + '/op_logs/recent'));\n        }\n    } else if (profile) {\n        navItems = [new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('修改信息', '/profile')];\n        // 不包含数学部权限的不显示用户统计\n        var _permissions = __WEBPACK_IMPORTED_MODULE_3_global___default.a.user.permissions.filter(function (p) {\n            return p < 200;\n        });\n        if (_permissions.length) {\n            navItems.push(new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('用户统计', '/profile/statistics'));\n            navItems.push(new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('最近操作', '/profile/op_logs/recent'));\n        }\n    } else {\n        navItems = [new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('用户列表', '/users'), new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('全体统计', '/users/statistics'), new __WEBPACK_IMPORTED_MODULE_2_js_nav__[\"a\" /* NavItem */]('添加', '/admin/adduser')];\n    }\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_nav__[\"b\" /* setNavBar */])(navItems, current);\n}\n\nvar UserRole = function () {\n    function UserRole() {\n        __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, UserRole);\n    }\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(UserRole, null, [{\n        key: 'isAdmin',\n        value: function isAdmin(role) {\n            return role === UserRole.kAdmin;\n        }\n    }]);\n\n    return UserRole;\n}();\n\nUserRole.kDescDict = {\n    1: '管理员',\n    10: '用户'\n};\n\nUserRole.kAdmin = 1;\nUserRole.kUser = 10;\n\nvar UserModule = function UserModule() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, UserModule);\n};\nUserModule.kAllModules = [{ code: 1, desc: '数学部' }];\nUserModule.kDescDict = {};\nUserModule.kAllModules.forEach(function (item) {\n    UserModule.kDescDict[item.code] = item.desc;\n});\nUserModule.kMathDepartment = 1;\nvar UserPermission = function () {\n    function UserPermission() {\n        __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, UserPermission);\n    }\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(UserPermission, null, [{\n        key: 'getPermissionsByModule',\n        value: function getPermissionsByModule(module) {\n            if (module === UserModule.kMathDepartment) {\n                return UserPermission.kMathDepartment;\n            }\n            return null;\n        }\n    }]);\n\n    return UserPermission;\n}();\nUserPermission.kMathDepartment = [{ code: 102, desc: '题目查询' }, { code: 103, desc: '试卷编辑' }, { code: 104, desc: '录入' }];\n\nUserPermission.kAll = {};\n[].concat(UserPermission.kMathDepartment).forEach(function (item) {\n    UserPermission.kAll[item.code] = item.desc;\n});\n\n/***/ }),\n\n/***/ \"./js/user/entry.jsx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"../node_modules/react/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom__ = __webpack_require__(\"../node_modules/react-dom/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_router__ = __webpack_require__(\"../node_modules/react-router/es/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__userlist__ = __webpack_require__(\"./js/user/userlist.jsx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__manageuser__ = __webpack_require__(\"./js/user/manageuser.jsx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__userinfo__ = __webpack_require__(\"./js/user/userinfo.jsx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__login__ = __webpack_require__(\"./js/user/login.jsx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__oplogs__ = __webpack_require__(\"./js/user/oplogs.jsx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__stats__ = __webpack_require__(\"./js/user/stats.jsx\");\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1_react_dom___default.a.render(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n    __WEBPACK_IMPORTED_MODULE_2_react_router__[\"a\" /* Router */],\n    { history: __WEBPACK_IMPORTED_MODULE_2_react_router__[\"b\" /* browserHistory */] },\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/users', component: __WEBPACK_IMPORTED_MODULE_3__userlist__[\"a\" /* default */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/users/statistics', component: __WEBPACK_IMPORTED_MODULE_8__stats__[\"a\" /* UsersStatisticsPage */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/admin/adduser', component: __WEBPACK_IMPORTED_MODULE_4__manageuser__[\"a\" /* AddUser */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/user/:id', component: __WEBPACK_IMPORTED_MODULE_4__manageuser__[\"b\" /* UpdateUser */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/user/:id/statistics', component: __WEBPACK_IMPORTED_MODULE_4__manageuser__[\"c\" /* UserStatisticsPage */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/user/:id/op_logs/recent', component: __WEBPACK_IMPORTED_MODULE_7__oplogs__[\"a\" /* UserRecentOpLogsPage */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/profile', component: __WEBPACK_IMPORTED_MODULE_5__userinfo__[\"a\" /* ProfileEditor */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/profile/statistics', component: __WEBPACK_IMPORTED_MODULE_5__userinfo__[\"b\" /* UserStats */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/profile/op_logs/recent', component: __WEBPACK_IMPORTED_MODULE_7__oplogs__[\"b\" /* ProfileRecentOpLogsPage */] }),\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_router__[\"c\" /* Route */], { path: '/auth/login', component: __WEBPACK_IMPORTED_MODULE_6__login__[\"a\" /* UserLogin */] })\n), document.getElementById('main'));\n\n/***/ }),\n\n/***/ \"./js/user/login.jsx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return UserLogin; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(\"../node_modules/babel-runtime/core-js/json/stringify.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/defineProperty.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"../node_modules/babel-runtime/core-js/object/get-prototype-of.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/classCallCheck.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/createClass.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/inherits.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react__ = __webpack_require__(\"../node_modules/react/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_js_quantum__ = __webpack_require__(\"./js/quantum.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_css_main_scss__ = __webpack_require__(\"./css/main.scss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_css_main_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_css_main_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__config__ = __webpack_require__(\"../config.json\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10__config__);\n\n\n\n\n\n\n\n\n\n\n\nvar UserLogin = function (_React$Component) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(UserLogin, _React$Component);\n\n    function UserLogin() {\n        __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, UserLogin);\n\n        var _this = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserLogin.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(UserLogin)).call(this));\n\n        _this.genImgSrc = function () {\n            var server = \"http://\" + __WEBPACK_IMPORTED_MODULE_10__config___default.a[\"production\"]['proxy']['math']['host'] + \":\" + __WEBPACK_IMPORTED_MODULE_10__config___default.a[\"production\"]['proxy']['math']['port'];\n            return server + \"/auth/verifycode?num=\" + Math.random();\n        };\n\n        _this.loginError = function () {\n            _this._refPass.focus();\n            _this.setState({ pass: '' });\n            _this.refreshCode();\n        };\n\n        _this.state = {\n            email: window.localStorage.getItem('loginName') || '',\n            pass: '',\n            capacha: '',\n            remember: true,\n            ajaxing: false,\n            imgSrc: _this.genImgSrc()\n        };\n        _this._refEmail = null;\n        _this._refPass = null;\n        _this._autoFocusInput = _this.state.email ? 'pass' : 'email';\n        return _this;\n    }\n\n    //  componentWillMount(){\n    //  \tlocalStorage.removeItem('res_str');\n    //  }\n\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(UserLogin, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            if (this.state.email) {\n                this._refPass.focus();\n            } else {\n                this._refEmail.focus();\n            }\n        }\n    }, {\n        key: \"handleChange\",\n        value: function handleChange(evt) {\n            var value = evt.target.type === 'checkbox' ? evt.target.checked : evt.target.value;\n            this.setState(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default()({}, evt.target.name, value));\n        }\n    }, {\n        key: \"refreshCode\",\n        value: function refreshCode() {\n            this.codeImg.setAttribute('src', this.genImgSrc());\n        }\n    }, {\n        key: \"login\",\n        value: function login(evt) {\n            var _this2 = this;\n\n            evt.preventDefault();\n            this.setState({ ajaxing: true });\n            __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"a\" /* default */].post('/auth/login', { json: this.state }).done(function (res) {\n                window.localStorage.setItem('loginName', _this2.state.email);\n                localStorage.setItem('token', res.authorization);\n                __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"a\" /* default */].get('/user/current_user').done(function (res) {\n                    window.localStorage.setItem('user', encodeURIComponent(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(res.g.user)));\n                    location.href = _this2.props.location.query.next_url || '/';\n                }).fail(_this2.loginError);\n            }).fail(this.loginError).always(function () {\n                _this2.setState({ ajaxing: false });\n            });\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this3 = this;\n\n            return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                \"div\",\n                { id: \"login-page\" },\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    \"div\",\n                    { className: \"login-header\" },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        \"div\",\n                        { className: \"logo-wrapper\" },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\"img\", { src: \"http://sealimg.youneng.com/static/img/logo/logo_s.png\" })\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        \"div\",\n                        { className: \"sys-name-wrapper\" },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\"img\", { src: \"http://sealimg.youneng.com/static/img/logo/318x80_n.png\" })\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    \"div\",\n                    { className: \"login-body\" },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        \"form\",\n                        { id: \"login-form\", className: \"\", onSubmit: this.login.bind(this) },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            \"div\",\n                            { className: \"form-row\" },\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\"input\", {\n                                type: \"email\", name: \"email\", className: \"form-control\",\n                                placeholder: \"\\u7528\\u6237\\u540D\", required: true,\n                                value: this.state.email,\n                                onChange: this.handleChange.bind(this),\n                                ref: function ref(c) {\n                                    _this3._refEmail = c;\n                                }, key: \"email\"\n                            })\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            \"div\",\n                            { className: \"form-row\" },\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\"input\", {\n                                type: \"password\", name: \"pass\", className: \"form-control\", required: true,\n                                placeholder: \"\\u5BC6\\u7801\",\n                                value: this.state.pass, onChange: this.handleChange.bind(this),\n                                ref: function ref(c) {\n                                    _this3._refPass = c;\n                                }, key: \"pass\"\n                            })\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            \"div\",\n                            { className: \"form-row\" },\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                \"div\",\n                                { className: \"capacha\" },\n                                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\"input\", {\n                                    type: \"text\", name: \"capacha\", className: \"form-control text\", required: true,\n                                    placeholder: \"\\u9A8C\\u8BC1\\u7801\",\n                                    value: this.state.capacha, onChange: this.handleChange.bind(this)\n                                }),\n                                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\"img\", { src: this.state.imgSrc, alt: \"\", ref: function ref(_ref) {\n                                        return _this3.codeImg = _ref;\n                                    }, onClick: this.refreshCode.bind(this) })\n                            )\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            \"div\",\n                            { className: \"form-row\" },\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                \"label\",\n                                { className: \"checkbox-inline remember\" },\n                                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\"input\", {\n                                    type: \"checkbox\", name: \"remember\", checked: this.state.remember,\n                                    onChange: this.handleChange.bind(this)\n                                }),\n                                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                    \"span\",\n                                    null,\n                                    \"\\u8BB0\\u4F4F\\u6211\"\n                                )\n                            )\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            \"div\",\n                            { className: \"form-row\" },\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                \"button\",\n                                {\n                                    className: \"btn btn-primary btn-lg\", type: \"submit\"\n                                },\n                                \"\\u767B\\u5F55\"\n                            ),\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                \"div\",\n                                { className: \"forget-pass hide\" },\n                                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                    \"a\",\n                                    { href: \"#\", \"data-action\": \"forget-pass\" },\n                                    \"\\u5FD8\\u8BB0\\u5BC6\\u7801\"\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return UserLogin;\n}(__WEBPACK_IMPORTED_MODULE_7_react___default.a.Component);\n\n/***/ }),\n\n/***/ \"./js/user/manageuser.jsx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return UserStatSearchBar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return AddUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return UpdateUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return UserStatistics; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return UserStatisticsPage; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/defineProperty.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"../node_modules/babel-runtime/core-js/object/get-prototype-of.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/classCallCheck.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/createClass.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/inherits.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react__ = __webpack_require__(\"../node_modules/react/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_js_quantum__ = __webpack_require__(\"./js/quantum.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_immutable__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_immutable__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_sprintf_js__ = __webpack_require__(\"../node_modules/sprintf-js/src/sprintf.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_sprintf_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_sprintf_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_global__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_global___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_global__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__common__ = __webpack_require__(\"./js/user/common.jsx\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar UserInfo = function (_React$Component) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(UserInfo, _React$Component);\n\n    function UserInfo(props) {\n        __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, UserInfo);\n\n        var _this = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserInfo.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(UserInfo)).call(this, props));\n\n        _this.state = {\n            tip: \"\"\n        };\n        _this.isAdd = _this.props.opType === \"addUser\";\n        _this.currentUser = __WEBPACK_IMPORTED_MODULE_11_global___default.a.user;\n        _this.setBind();\n        return _this;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(UserInfo, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (this.isAdd) {\n                __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_12__common__[\"a\" /* setCurrentNav */])('添加');\n            } else {\n                __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_12__common__[\"a\" /* setCurrentNav */])('编辑', this.props.userId);\n            }\n            this.init(this.isAdd);\n        }\n    }, {\n        key: 'setTip',\n        value: function setTip(tip) {\n            this.setState({ tip: tip });\n        }\n    }, {\n        key: 'setBind',\n        value: function setBind() {\n            this.updateUserInfo = this.updateUserInfo.bind(this);\n            this.changeRole = this.changeRole.bind(this);\n            this.changePermissions = this.changePermissions.bind(this);\n            this.banUser = this.banUser.bind(this);\n            this.addUser = this.addUser.bind(this);\n            this.changeEdu = this.changeEdu.bind(this);\n            this.submit = this.submit.bind(this);\n        }\n    }, {\n        key: 'setUser',\n        value: function setUser(key, value) {\n            var user = this.state.user.set(key, value);\n            this.setState({ user: user });\n        }\n    }, {\n        key: 'init',\n        value: function init(isAdd) {\n            var _this2 = this;\n\n            if (isAdd) {\n                var user = {\n                    email: \"\",\n                    name: \"\",\n                    pass: \"\",\n                    edu: __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"d\" /* Edu */].kDefault,\n                    role: __WEBPACK_IMPORTED_MODULE_12__common__[\"b\" /* UserRole */].kUser,\n                    permissions: []\n                };\n                this.setState({ user: __WEBPACK_IMPORTED_MODULE_9_immutable___default.a.fromJS(user) });\n            } else {\n                __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"b\" /* Q */].get('/api/user/' + this.props.userId, { query: { format: \"json\" } }).done(function (res) {\n                    _this2.setState({\n                        user: __WEBPACK_IMPORTED_MODULE_9_immutable___default.a.fromJS(res)\n                    });\n                });\n            }\n        }\n    }, {\n        key: 'inputChange',\n        value: function inputChange(key, evt) {\n            var value = evt.target.value;\n            this.setUser(key, value);\n        }\n    }, {\n        key: 'changeRole',\n        value: function changeRole(evt) {\n            var value = parseInt(evt.target.value, 10);\n            this.setUser('role', value);\n        }\n    }, {\n        key: 'changeEdu',\n        value: function changeEdu(evt) {\n            var value = parseInt(evt.target.value, 10);\n            var edu = this.state.user.get('edu');\n            if (edu !== value) {\n                this.setUser('edu', value);\n            }\n        }\n    }, {\n        key: 'changePermissions',\n        value: function changePermissions(evt) {\n            var value = parseInt(evt.target.value, 10);\n            var permissions = this.state.user.get('permissions');\n            if (permissions.indexOf(value) !== -1) {\n                permissions = permissions.delete(permissions.indexOf(value));\n            } else {\n                permissions = permissions.push(value);\n            }\n            this.setUser('permissions', permissions);\n        }\n    }, {\n        key: 'banUser',\n        value: function banUser() {\n            this.updateUser({ valid: !this.state.user.get(\"valid\") });\n        }\n    }, {\n        key: 'submit',\n        value: function submit(evt) {\n            evt.preventDefault();\n            if (this.isAdd) {\n                return this.addUser(evt);\n            } else {\n                return this.updateUserInfo(evt);\n            }\n        }\n    }, {\n        key: 'updateUser',\n        value: function updateUser(data, success) {\n            var _this3 = this;\n\n            this.setState({ loading: true });\n            __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"b\" /* Q */].post('/api/user/' + this.props.userId, { json: { update: data } }).done(function (res) {\n                _this3.setState({\n                    user: __WEBPACK_IMPORTED_MODULE_9_immutable___default.a.fromJS(res)\n                });\n                if (success) {\n                    success();\n                }\n            }).always(function () {\n                _this3.setState({ loading: false });\n            });\n        }\n    }, {\n        key: 'updateUserInfo',\n        value: function updateUserInfo() {\n            var user = this.state.user;\n            var pass = user.get(\"pass\");\n            if (pass && (pass.length < 6 || pass.length > 32)) {\n                this.setTip(\"密码需要6～32位！\");\n                return;\n            }\n            this.setTip(\"\");\n            var data = {\n                name: user.get(\"name\"),\n                role: user.get(\"role\"),\n                edu: user.get('edu'),\n                permissions: user.get('permissions'),\n                module: __WEBPACK_IMPORTED_MODULE_12__common__[\"c\" /* UserModule */].kMathDepartment\n            };\n            if (pass) {\n                data.pass = pass;\n            }\n            this.updateUser(data, function () {\n                __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"b\" /* Q */].alert(\"信息更新成功！\");\n            });\n        }\n    }, {\n        key: 'addUser',\n        value: function addUser() {\n            var _this4 = this;\n\n            var user = this.state.user;\n            if (!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/.test(user.get(\"email\"))) {\n                this.setTip(\"不是合法的Email！\");\n                return;\n            }\n\n            var data = {\n                email: user.get(\"email\"),\n                name: user.get(\"name\"),\n                role: user.get(\"role\"),\n                pass: user.get('pass'),\n                edu: user.get(\"edu\"),\n                permissions: user.get('permissions'),\n                module: __WEBPACK_IMPORTED_MODULE_12__common__[\"c\" /* UserModule */].kMathDepartment\n            };\n            this.setState({ loading: true });\n            __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"b\" /* Q */].put('/api/users', { json: data }).done(function () {\n                __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"b\" /* Q */].alert(\"添加成功\");\n                location.href = \"/users\";\n            }).always(function () {\n                _this4.setState({ loading: false });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.state.user) {\n                return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    null,\n                    '\\u6570\\u636E\\u52A0\\u8F7D\\u4E2D....'\n                );\n            }\n            return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                'form',\n                { id: 'userinfo-form', className: 'form-horizontal', onSubmit: this.submit },\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'label',\n                        { htmlFor: 'inputEmail', className: 'col-sm-2 control-label' },\n                        '\\u90AE\\u7BB1'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-8' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement('input', {\n                            type: 'email', id: 'inputEmail', className: 'form-control',\n                            disabled: !this.isAdd,\n                            value: this.state.user.get('email'),\n                            onChange: this.inputChange.bind(this, \"email\")\n                        })\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'label',\n                        { htmlFor: 'inputUserName', className: 'col-sm-2 control-label' },\n                        '\\u7528\\u6237\\u540D'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-8' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement('input', {\n                            type: 'text', id: 'inputUserName', className: 'form-control',\n                            onChange: this.inputChange.bind(this, \"name\"),\n                            value: this.state.user.get('name')\n                        })\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: \"form-group\" },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'label',\n                        { htmlFor: 'inputPass', className: 'col-sm-2 control-label' },\n                        '\\u5BC6\\u7801'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-8' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement('input', {\n                            type: 'password', id: 'inputPass', className: 'form-control',\n                            required: this.isAdd,\n                            onChange: this.inputChange.bind(this, \"pass\"),\n                            value: this.state.user.get('pass') || ''\n                        })\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_12__common__[\"b\" /* UserRole */].isAdmin(this.currentUser.role) ? __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(AdminEdu, {\n                    edu: this.state.user.get('edu'),\n                    changeEdu: this.changeEdu\n                }) : null,\n                __WEBPACK_IMPORTED_MODULE_12__common__[\"b\" /* UserRole */].isAdmin(this.currentUser.role) && this.state.user.get('_id') !== this.currentUser._id ? __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'label',\n                        { htmlFor: 'inputRole', className: 'col-sm-2 control-label' },\n                        '\\u89D2\\u8272'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-8' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            'select',\n                            {\n                                className: 'form-control', value: this.state.user.get('role'),\n                                onChange: this.changeRole\n                            },\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                'option',\n                                { value: '10' },\n                                '\\u666E\\u901A\\u7528\\u6237'\n                            ),\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                'option',\n                                { value: '1' },\n                                '\\u7BA1\\u7406\\u5458'\n                            )\n                        )\n                    )\n                ) : null,\n                __WEBPACK_IMPORTED_MODULE_12__common__[\"b\" /* UserRole */].isAdmin(this.currentUser.role) ? __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(Permissions, {\n                    user: this.currentUser,\n                    permissions: this.state.user.get('permissions'),\n                    changePermissions: this.changePermissions\n                }) : null,\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: !this.isAdd ? \"form-group\" : \"hide\" },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-offset-2 col-sm-8' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            'span',\n                            {\n                                className: this.state.user.get('valid') ? \"label label-success\" : \"label label-warning\"\n                            },\n                            this.state.user.get('valid') ? \"Active\" : \"Banned\"\n                        )\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: this.state.tip !== \"\" ? 'form-group' : 'hide' },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-offset-2 col-sm-8' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            'div',\n                            { className: 'alert alert-warning' },\n                            this.state.tip\n                        )\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: \"form-group\" },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-offset-2 col-sm-8' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            'button',\n                            {\n                                type: 'submit', disabled: this.state.loading, className: 'btn btn-success'\n                            },\n                            '\\u4FDD\\u5B58'\n                        ),\n                        '\\xA0\\xA0',\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            'button',\n                            {\n                                type: 'button', onClick: this.banUser, disabled: this.state.loading,\n                                className: 'btn btn-danger ' + (this.isAdd ? 'hide' : '')\n                            },\n                            this.state.user.get('valid') ? \"禁用\" : \"激活\"\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return UserInfo;\n}(__WEBPACK_IMPORTED_MODULE_7_react___default.a.Component);\n\nfunction AdminEdu(props) {\n    return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n        'div',\n        { className: 'form-group' },\n        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n            'label',\n            { htmlFor: 'inputEdu', className: 'col-sm-2 control-label' },\n            '\\u7EA7\\u6BB5'\n        ),\n        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n            'div',\n            { className: 'col-sm-8' },\n            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                'select',\n                {\n                    className: 'form-control', value: props.edu,\n                    onChange: props.changeEdu\n                },\n                __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"c\" /* EduDesc */].kAll.map(function (eduDesc) {\n                    return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'option',\n                        { value: eduDesc.edu },\n                        eduDesc.name\n                    );\n                })\n            )\n        )\n    );\n}\n\nfunction Permissions(props) {\n    var user = props.user;\n    var checkedPermissions = props.permissions;\n    if (!user.module) {\n        return null;\n    }\n    var permissions = __WEBPACK_IMPORTED_MODULE_12__common__[\"d\" /* UserPermission */].getPermissionsByModule(user.module);\n\n    return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n        'div',\n        { className: 'form-group' },\n        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n            'label',\n            { className: 'col-sm-2 control-label' },\n            '\\u6743\\u9650'\n        ),\n        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n            'div',\n            { className: 'col-sm-8' },\n            permissions.map(function (perm, i) {\n                return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'label',\n                    { className: 'checkbox-inline', key: i },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement('input', {\n                        type: 'checkbox', value: perm.code,\n                        checked: checkedPermissions.indexOf(perm.code) !== -1,\n                        onChange: props.changePermissions\n                    }),\n                    perm.desc\n                );\n            })\n        )\n    );\n}\n\nvar UserStatistics = function (_React$Component2) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(UserStatistics, _React$Component2);\n\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(UserStatistics, null, [{\n        key: 'defaultDateRange',\n        value: function defaultDateRange() {\n            var today = new Date();\n            var monthFirst = new Date(today.getFullYear(), today.getMonth(), 1);\n            return [UserStatistics.formatDate(monthFirst), UserStatistics.formatDate(today)];\n        }\n    }, {\n        key: 'formatDate',\n        value: function formatDate(dt) {\n            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_10_sprintf_js__[\"sprintf\"])('%04d-%02d-%02d', dt.getFullYear(), dt.getMonth() + 1, dt.getDate());\n        }\n    }]);\n\n    function UserStatistics(props) {\n        __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, UserStatistics);\n\n        var _this5 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserStatistics.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(UserStatistics)).call(this, props));\n\n        _this5.state = {\n            dataReady: false,\n            statistics: {}\n        };\n        _this5.setBind();\n        return _this5;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(UserStatistics, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.search.apply(this, __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(UserStatistics.defaultDateRange()));\n            this.loadUserInfo();\n        }\n    }, {\n        key: 'setBind',\n        value: function setBind() {\n            this.search = this.search.bind(this);\n        }\n    }, {\n        key: 'loadUserInfo',\n        value: function loadUserInfo() {\n            var _this6 = this;\n\n            __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"b\" /* Q */].get('/api/user/' + this.props.uid).done(function (user) {\n                _this6.user = user;\n                _this6.setState({\n                    dataReady: true\n                });\n            });\n        }\n    }, {\n        key: 'search',\n        value: function search(start, end) {\n            var _this7 = this;\n\n            var query = {};\n            if (start) {\n                query.start = start + ' 00:00';\n            }\n            if (end) {\n                query.end = end + ' 23:59';\n            }\n            __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"b\" /* Q */].get('/api/user/' + this.props.uid + '/statistics', { query: query }).done(function (data) {\n                _this7.setState({\n                    statistics: data\n                });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.state.dataReady) {\n                return null;\n            }\n            var statistics = this.state.statistics;\n            return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                'div',\n                { id: 'user-statistics' },\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: 'panel panel-default' },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'panel-heading' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            'span',\n                            null,\n                            this.user.name || this.user.email,\n                            '\\u7684\\u5DE5\\u4F5C\\u91CF'\n                        )\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'div',\n                        { className: 'panel-body' },\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            'div',\n                            { className: 'search-bar-wrapper' },\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(UserStatSearchBar, {\n                                defaultDateRange: UserStatistics.defaultDateRange(),\n                                searchCallback: this.search\n                            })\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                            'div',\n                            null,\n                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                'table',\n                                { className: 'table table-striped table-hover' },\n                                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                    'thead',\n                                    null,\n                                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                        'tr',\n                                        null,\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'th',\n                                            null,\n                                            '\\u7528\\u6237'\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'th',\n                                            null,\n                                            '\\u521B\\u5EFA\\u9898\\u76EE'\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'th',\n                                            null,\n                                            '\\u6392\\u7248\\u9898\\u76EE'\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'th',\n                                            null,\n                                            '\\u6807\\u6CE8\\u9898\\u76EE'\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'th',\n                                            null,\n                                            '\\u521B\\u5EFAVolume'\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'th',\n                                            null,\n                                            'Volume\\u9898\\u76EE\\u6570'\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'th',\n                                            null,\n                                            '\\u6807\\u6CE8'\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'th',\n                                            null,\n                                            '\\u5BA1\\u6838'\n                                        )\n                                    )\n                                ),\n                                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                    'tbody',\n                                    null,\n                                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                        'tr',\n                                        null,\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'td',\n                                            null,\n                                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                                'span',\n                                                null,\n                                                this.user.name || this.user.email\n                                            )\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'td',\n                                            null,\n                                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                                'span',\n                                                null,\n                                                statistics.create\n                                            )\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'td',\n                                            null,\n                                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                                'span',\n                                                null,\n                                                statistics.typeset\n                                            )\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'td',\n                                            null,\n                                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                                'span',\n                                                null,\n                                                statistics.tag\n                                            )\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'td',\n                                            null,\n                                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                                'span',\n                                                null,\n                                                statistics.volume\n                                            )\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'td',\n                                            null,\n                                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                                'span',\n                                                null,\n                                                statistics.volume_items\n                                            )\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'td',\n                                            null,\n                                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                                'span',\n                                                null,\n                                                statistics.review_tag\n                                            )\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                            'td',\n                                            null,\n                                            __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                                                'span',\n                                                null,\n                                                statistics.review_typeset\n                                            )\n                                        )\n                                    )\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return UserStatistics;\n}(__WEBPACK_IMPORTED_MODULE_7_react___default.a.Component);\n\nvar UserStatisticsPage = function (_React$Component3) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(UserStatisticsPage, _React$Component3);\n\n    function UserStatisticsPage() {\n        __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, UserStatisticsPage);\n\n        return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserStatisticsPage.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(UserStatisticsPage)).apply(this, arguments));\n    }\n\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(UserStatisticsPage, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_12__common__[\"a\" /* setCurrentNav */])('用户统计', this.props.params.id);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(UserStatistics, { uid: this.props.params.id });\n        }\n    }]);\n\n    return UserStatisticsPage;\n}(__WEBPACK_IMPORTED_MODULE_7_react___default.a.Component);\n\nvar UserStatSearchBar = function (_React$Component4) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(UserStatSearchBar, _React$Component4);\n\n    function UserStatSearchBar(props) {\n        __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, UserStatSearchBar);\n\n        var _this9 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserStatSearchBar.__proto__ || __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(UserStatSearchBar)).call(this, props));\n\n        _this9.state = {\n            start: props.defaultDateRange[0],\n            end: props.defaultDateRange[1]\n        };\n        _this9.setBind();\n        return _this9;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(UserStatSearchBar, [{\n        key: 'setBind',\n        value: function setBind() {\n            this.changeHandler = this.changeHandler.bind(this);\n        }\n    }, {\n        key: 'changeHandler',\n        value: function changeHandler(key, evt) {\n            this.setState(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()({}, key, evt.target.value));\n        }\n    }, {\n        key: 'quickSearch',\n        value: function quickSearch(rangeName) {\n            var _this10 = this;\n\n            var range = [new Date(), new Date()];\n            switch (rangeName) {\n                case 'yesterday':\n                    range = [new Date(new Date().getTime() - 86400 * 1000), new Date(new Date().getTime() - 86400 * 1000)];\n                    break;\n                case 'thisweek':\n                    range = [__WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"e\" /* Qdate */].weekFirst(), new Date()];\n                    break;\n                case 'lastweek':\n                    range = [__WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"e\" /* Qdate */].weekFirst(new Date(__WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"e\" /* Qdate */].weekFirst().getTime() - 1)), new Date(__WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"e\" /* Qdate */].weekFirst(new Date(__WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"e\" /* Qdate */].weekFirst().getTime() - 1)).getTime() + 6 * 86400 * 1000)];\n                    break;\n                default:\n                    break;\n            }\n            this.setState({\n                start: __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"e\" /* Qdate */].dateFormat(range[0]),\n                end: __WEBPACK_IMPORTED_MODULE_8_js_quantum__[\"e\" /* Qdate */].dateFormat(range[1])\n            }, function () {\n                return _this10.props.searchCallback(_this10.state.start, _this10.state.end);\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this11 = this;\n\n            return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                'form',\n                { className: 'form-inline date-range-form' },\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'label',\n                        null,\n                        '\\u5F00\\u59CB\\u65F6\\u95F4\\uFF1A'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement('input', {\n                        type: 'date', className: 'form-control', value: this.state.start,\n                        onChange: this.changeHandler.bind(this, 'start')\n                    })\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                        'label',\n                        null,\n                        '\\u7ED3\\u675F\\u65F6\\u95F4\\uFF1A'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement('input', {\n                        type: 'date', className: 'form-control', value: this.state.end,\n                        onChange: this.changeHandler.bind(this, 'end')\n                    })\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'button',\n                    {\n                        type: 'button', className: 'btn btn-success',\n                        onClick: function onClick() {\n                            return _this11.props.searchCallback(_this11.state.start, _this11.state.end);\n                        }\n                    },\n                    '\\u67E5\\u8BE2'\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'button',\n                    {\n                        type: 'button', className: 'btn btn-default',\n                        onClick: this.quickSearch.bind(this, 'today')\n                    },\n                    '\\u4ECA\\u5929'\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'button',\n                    {\n                        type: 'button', className: 'btn btn-default',\n                        onClick: this.quickSearch.bind(this, 'yesterday')\n                    },\n                    '\\u6628\\u5929'\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'button',\n                    {\n                        type: 'button', className: 'btn btn-default',\n                        onClick: this.quickSearch.bind(this, 'thisweek')\n                    },\n                    '\\u672C\\u5468'\n                ),\n                __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(\n                    'button',\n                    {\n                        type: 'button', className: 'btn btn-default',\n                        onClick: this.quickSearch.bind(this, 'lastweek')\n                    },\n                    '\\u4E0A\\u5468'\n                )\n            );\n        }\n    }]);\n\n    return UserStatSearchBar;\n}(__WEBPACK_IMPORTED_MODULE_7_react___default.a.Component);\n\nvar AddUser = function AddUser() {\n    return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(UserInfo, { opType: 'addUser' });\n};\n\nvar UpdateUser = function UpdateUser(props) {\n    return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(UserInfo, { opType: 'updateUser', userId: props.params.id });\n};\n\n\n\n/***/ }),\n\n/***/ \"./js/user/oplogs.jsx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export RecentOplogs */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return ProfileRecentOpLogsPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return UserRecentOpLogsPage; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"../node_modules/babel-runtime/core-js/object/get-prototype-of.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/classCallCheck.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/createClass.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/inherits.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react__ = __webpack_require__(\"../node_modules/react/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_immutable__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_immutable__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_js_quantum__ = __webpack_require__(\"./js/quantum.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_global__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_global___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_global__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__common__ = __webpack_require__(\"./js/user/common.jsx\");\n\n\n\n\n\n\n\n\n\n\n\nvar RecentOplogs = function (_React$Component) {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(RecentOplogs, _React$Component);\n\n    function RecentOplogs(props) {\n        __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, RecentOplogs);\n\n        var _this = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (RecentOplogs.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(RecentOplogs)).call(this, props));\n\n        _this.state = {\n            opLogs: null\n        };\n        return _this;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(RecentOplogs, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"a\" /* default */].get('/api/user/' + this.props.uid + '/op_logs/recent', { query: { days: this.props.days } }).done(function (results) {\n                _this2.setState({ opLogs: __WEBPACK_IMPORTED_MODULE_6_immutable___default.a.fromJS(results) });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.state.opLogs === null) {\n                return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    'div',\n                    { className: 'loading' },\n                    '\\u6B63\\u5728\\u52A0\\u8F7D\\u4E2D...'\n                );\n            }\n            return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                'table',\n                { className: 'table table-hover' },\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    'thead',\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                        'tr',\n                        null,\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            'th',\n                            null,\n                            '\\u5E8F\\u53F7'\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            'th',\n                            null,\n                            '\\u65F6\\u95F4'\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            'th',\n                            null,\n                            '\\u7C7B\\u578B'\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            'th',\n                            null,\n                            'ID'\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            'th',\n                            null,\n                            '\\u64CD\\u4F5C'\n                        )\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    'tbody',\n                    null,\n                    this.state.opLogs.map(function (opLog, index) {\n                        return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(OpLog, { index: index, opLog: opLog, key: index });\n                    })\n                )\n            );\n        }\n    }]);\n\n    return RecentOplogs;\n}(__WEBPACK_IMPORTED_MODULE_5_react___default.a.Component);\n\nfunction OpLog(_ref) {\n    var opLog = _ref.opLog,\n        index = _ref.index;\n\n    return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n        'tr',\n        null,\n        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n            'td',\n            null,\n            index + 1\n        ),\n        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n            'td',\n            null,\n            new Date(opLog.get('ctime') * 1000).toLocaleString()\n        ),\n        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n            'td',\n            null,\n            opLog.get('obj_type')\n        ),\n        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n            'td',\n            null,\n            __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                'a',\n                { href: '/' + opLog.get('obj_type') + '/' + opLog.get('obj_id'), target: '_blank' },\n                opLog.get('obj_id')\n            )\n        ),\n        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n            'td',\n            null,\n            opLog.get('type')\n        )\n    );\n}\n\nvar ProfileRecentOpLogsPage = function (_React$Component2) {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(ProfileRecentOpLogsPage, _React$Component2);\n\n    function ProfileRecentOpLogsPage() {\n        __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, ProfileRecentOpLogsPage);\n\n        return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ProfileRecentOpLogsPage.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(ProfileRecentOpLogsPage)).apply(this, arguments));\n    }\n\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(ProfileRecentOpLogsPage, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9__common__[\"a\" /* setCurrentNav */])('最近操作', null, true);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                'div',\n                { id: 'my-recent-op-logs' },\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    'h3',\n                    null,\n                    '\\u6700\\u8FD1',\n                    this.props.days,\n                    '\\u5929\\u7684\\u64CD\\u4F5C'\n                ),\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(RecentOplogs, { uid: __WEBPACK_IMPORTED_MODULE_8_global___default.a.user._id, days: this.props.days })\n            );\n        }\n    }]);\n\n    return ProfileRecentOpLogsPage;\n}(__WEBPACK_IMPORTED_MODULE_5_react___default.a.Component);\n\nProfileRecentOpLogsPage.defaultProps = {\n    days: 7\n};\n\nvar UserRecentOpLogsPage = function (_React$Component3) {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(UserRecentOpLogsPage, _React$Component3);\n\n    function UserRecentOpLogsPage() {\n        __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, UserRecentOpLogsPage);\n\n        return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserRecentOpLogsPage.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(UserRecentOpLogsPage)).apply(this, arguments));\n    }\n\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(UserRecentOpLogsPage, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9__common__[\"a\" /* setCurrentNav */])('最近操作', this.props.params.id, false);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                'div',\n                { id: 'user-recent-op-logs' },\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    'h3',\n                    null,\n                    '\\u6700\\u8FD1',\n                    this.props.days,\n                    '\\u5929\\u7684\\u64CD\\u4F5C'\n                ),\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(RecentOplogs, { uid: this.props.params.id, days: this.props.days })\n            );\n        }\n    }]);\n\n    return UserRecentOpLogsPage;\n}(__WEBPACK_IMPORTED_MODULE_5_react___default.a.Component);\n\nUserRecentOpLogsPage.defaultProps = {\n    days: 7\n};\n\n/***/ }),\n\n/***/ \"./js/user/stats.jsx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return UsersStatisticsPage; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"../node_modules/babel-runtime/core-js/object/get-prototype-of.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/classCallCheck.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/createClass.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/inherits.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(\"../node_modules/react/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_js_quantum__ = __webpack_require__(\"./js/quantum.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_css_main_scss__ = __webpack_require__(\"./css/main.scss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_css_main_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_css_main_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__manageuser__ = __webpack_require__(\"./js/user/manageuser.jsx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__common__ = __webpack_require__(\"./js/user/common.jsx\");\n\n\n\n\n\n\n\n\n\n\n\n\nvar UsersStatisticsPage = function (_React$Component) {\n    __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(UsersStatisticsPage, _React$Component);\n\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(UsersStatisticsPage, null, [{\n        key: \"defaultDateRange\",\n        value: function defaultDateRange() {\n            return [__WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"e\" /* Qdate */].dateFormat(new Date()), __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"e\" /* Qdate */].dateFormat(new Date())];\n        }\n    }]);\n\n    function UsersStatisticsPage(props) {\n        __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, UsersStatisticsPage);\n\n        var _this = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UsersStatisticsPage.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(UsersStatisticsPage)).call(this, props));\n\n        _this.state = {\n            stats: []\n        };\n        _this.setBind();\n        return _this;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(UsersStatisticsPage, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_10__common__[\"a\" /* setCurrentNav */])('全体统计', this.props.params.id);\n\n            this.search.apply(this, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default()(UsersStatisticsPage.defaultDateRange()));\n        }\n    }, {\n        key: \"setBind\",\n        value: function setBind() {\n            this.search = this.search.bind(this);\n        }\n    }, {\n        key: \"search\",\n        value: function search(start, end) {\n            var _this2 = this;\n\n            var query = {};\n            if (start) {\n                query.start = __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"b\" /* Q */].dateStrToUnixTime(start) / 1000;\n            }\n            if (end) {\n                query.end = __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"b\" /* Q */].dateStrToUnixTime(end) / 1000 + 86400;\n            }\n            __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"b\" /* Q */].get(\"/api/users/statistics\", { query: query }).done(function (data) {\n                _this2.setState({\n                    stats: data\n                });\n            });\n        }\n    }, {\n        key: \"_renderTr\",\n        value: function _renderTr(stat) {\n            return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                \"tr\",\n                { key: stat._id },\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        stat.name\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        stat.create\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        stat.typeset\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        stat.tag\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        stat.volume\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        stat.volume_items\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        stat.review_tag\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        stat.review_typeset\n                    )\n                )\n            );\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                \"div\",\n                { id: \"user-statistics\" },\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    \"div\",\n                    { className: \"panel panel-default\" },\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"div\",\n                        { className: \"panel-heading\" },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            \"span\",\n                            null,\n                            \"\\u5168\\u4F53\\u5DE5\\u4F5C\\u7EDF\\u8BA1\"\n                        )\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        \"div\",\n                        { className: \"panel-body\" },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            \"div\",\n                            { className: \"search-bar-wrapper\" },\n                            __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__manageuser__[\"e\" /* UserStatSearchBar */], {\n                                defaultDateRange: UsersStatisticsPage.defaultDateRange(),\n                                searchCallback: this.search\n                            })\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            \"div\",\n                            null,\n                            __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                \"table\",\n                                { className: \"table table-striped table-hover\" },\n                                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                    \"thead\",\n                                    null,\n                                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                        \"tr\",\n                                        null,\n                                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                            \"th\",\n                                            null,\n                                            \"\\u7528\\u6237\"\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                            \"th\",\n                                            null,\n                                            \"\\u521B\\u5EFA\\u9898\\u76EE\"\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                            \"th\",\n                                            null,\n                                            \"\\u6392\\u7248\\u9898\\u76EE\"\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                            \"th\",\n                                            null,\n                                            \"\\u6807\\u6CE8\\u9898\\u76EE\"\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                            \"th\",\n                                            null,\n                                            \"\\u521B\\u5EFAVolume\"\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                            \"th\",\n                                            null,\n                                            \"Volume\\u9898\\u76EE\\u6570\"\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                            \"th\",\n                                            null,\n                                            \"\\u6807\\u6CE8\"\n                                        ),\n                                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                            \"th\",\n                                            null,\n                                            \"\\u5BA1\\u6838\"\n                                        )\n                                    )\n                                ),\n                                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                    \"tbody\",\n                                    null,\n                                    this.state.stats.map(this._renderTr.bind(this))\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return UsersStatisticsPage;\n}(__WEBPACK_IMPORTED_MODULE_6_react___default.a.Component);\n\n/***/ }),\n\n/***/ \"./js/user/userinfo.jsx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ProfileEditor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return UserStats; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/defineProperty.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"../node_modules/babel-runtime/core-js/object/get-prototype-of.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/classCallCheck.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/createClass.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/inherits.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(\"../node_modules/react/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_js_quantum__ = __webpack_require__(\"./js/quantum.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_global__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_global___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_global__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__common__ = __webpack_require__(\"./js/user/common.jsx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__manageuser__ = __webpack_require__(\"./js/user/manageuser.jsx\");\n\n\n\n\n\n\n\n\n\n\n\n\nvar UserInfoEditor = function (_React$Component) {\n    __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(UserInfoEditor, _React$Component);\n\n    function UserInfoEditor(props) {\n        __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, UserInfoEditor);\n\n        var _this = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserInfoEditor.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(UserInfoEditor)).call(this, props));\n\n        _this.state = {\n            tip: \"\",\n            newPass: \"\",\n            confirmPass: \"\",\n            edu: props.userEdu,\n            pass: \"\",\n            name: props.userName,\n            showPassForm: false,\n            loading: false\n        };\n        _this.setBind();\n        return _this;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(UserInfoEditor, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            var _this2 = this;\n\n            __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"b\" /* Q */].get('/api/user/' + this.props.userId).done(function (res) {\n                _this2.setState({\n                    edu: res.edu\n                }, function () {\n                    __WEBPACK_IMPORTED_MODULE_8_global___default.a.user.edu = res.edu;\n                    console.log(__WEBPACK_IMPORTED_MODULE_8_global___default.a.user.edu);\n                });\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9__common__[\"a\" /* setCurrentNav */])('修改信息', null, true);\n        }\n    }, {\n        key: 'setBind',\n        value: function setBind() {\n            this.showPassForm = this.showPassForm.bind(this);\n            this.updateUserName = this.updateUserName.bind(this);\n            this.updateUserEdu = this.updateUserEdu.bind(this);\n            this.updateUserPass = this.updateUserPass.bind(this);\n        }\n    }, {\n        key: 'setTip',\n        value: function setTip(tip) {\n            this.setState({ tip: tip });\n        }\n    }, {\n        key: 'changeEdu',\n        value: function changeEdu(evt) {\n            var value = parseInt(evt.target.value, 10);\n            var edu = this.state.edu;\n            if (edu !== value) {\n                this.setState({ edu: value });\n            }\n        }\n    }, {\n        key: 'inputChange',\n        value: function inputChange(key, evt) {\n            var value = evt.target.value;\n            this.setState(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()({}, key, value));\n            var btnStatus = this.state.invalid;\n            this.setState({ invalid: btnStatus });\n        }\n    }, {\n        key: 'showPassForm',\n        value: function showPassForm() {\n            this.setState({ showPassForm: !this.state.showPassForm });\n        }\n    }, {\n        key: 'updateUserName',\n        value: function updateUserName() {\n            this.setTip(\"\");\n            if (!this.state.name) {\n                this.setTip(\"用户名不能为空!\");\n                return;\n            }\n            this.updateUserInfo({ name: this.state.name });\n        }\n    }, {\n        key: 'updateUserEdu',\n        value: function updateUserEdu() {\n            this.setTip('');\n            this.updateUserInfo({ edu: this.state.edu });\n        }\n    }, {\n        key: 'updateUserPass',\n        value: function updateUserPass() {\n            var _this3 = this;\n\n            this.setTip(\"\");\n            if (!this.state.pass) {\n                this.setTip(\"密码为空!\");\n                return;\n            }\n            if (!this.state.newPass) {\n                this.setTip(\"新密码为空!\");\n                return;\n            }\n            if (this.state.newPass.length < 6 || this.state.pass.length < 6 || this.state.newPass.length > 32 || this.state.pass.length > 32) {\n                this.setTip(\"密码需要6～32位！\");\n                return;\n            }\n            if (this.state.newPass !== this.state.confirmPass) {\n                this.setTip(\"密码输入不一致！\");\n                return;\n            }\n            this.updateUserInfo({ pass: this.state.pass, newPass: this.state.newPass }, function () {\n                _this3.setState({ showPassForm: false });\n                __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"b\" /* Q */].alert(\"信息更新成功\");\n            });\n        }\n    }, {\n        key: 'updateUserInfo',\n        value: function updateUserInfo(params, successCallback) {\n            var _this4 = this;\n\n            this.setState({ loading: true });\n            this.setTip(\"\");\n            __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"b\" /* Q */].post('/api/user/' + this.props.userId, { json: { update_profile: params } }).done(function (res) {\n                //      \tlocalStorage.setItem('eduChange',res.edu)\n                __WEBPACK_IMPORTED_MODULE_8_global___default.a.user.edu = res.edu;\n                console.log(__WEBPACK_IMPORTED_MODULE_8_global___default.a.user.edu);\n\n                if (successCallback) {\n                    successCallback();\n                } else {\n                    __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"b\" /* Q */].alert(\"信息更新成功\");\n                }\n            }).fail(function () {\n                _this4.setState({ pass: \"\", newPass: \"\", confirmPass: \"\" });\n            }).always(function () {\n                _this4.setState({ loading: false });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                'form',\n                { id: 'userinfo-form', className: 'form-horizontal' },\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'label',\n                        { htmlFor: 'inputEmail', className: 'col-sm-2 control-label' },\n                        '\\u90AE\\u7BB1'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'label',\n                        { className: 'col-sm-4 control-label text-left' },\n                        this.props.email\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'label',\n                        { htmlFor: 'inputUserName', className: 'col-sm-2 control-label' },\n                        '\\u7528\\u6237\\u540D'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-2' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('input', {\n                            type: 'text', id: 'inputUserName', className: 'form-control',\n                            onChange: this.inputChange.bind(this, \"name\"),\n                            value: this.state.name\n                        })\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-2' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'button',\n                            {\n                                type: 'button', onClick: this.updateUserName,\n                                disabled: this.state.loading, className: 'btn btn-success'\n                            },\n                            '\\u4FDD\\u5B58'\n                        )\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'label',\n                        { htmlFor: 'inputUserEdu', className: 'col-sm-2 control-label' },\n                        '\\u7EA7\\u6BB5'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-2' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'select',\n                            {\n                                id: 'inputUserEdu',\n                                className: 'form-control',\n                                value: this.state.edu,\n                                onChange: this.changeEdu.bind(this)\n                            },\n                            __WEBPACK_IMPORTED_MODULE_7_js_quantum__[\"c\" /* EduDesc */].kAll.map(function (eduDesc) {\n                                return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                    'option',\n                                    {\n                                        value: eduDesc.edu,\n                                        key: eduDesc.edu\n                                    },\n                                    eduDesc.name\n                                );\n                            })\n                        )\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-2' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'button',\n                            {\n                                type: 'button', onClick: this.updateUserEdu,\n                                disabled: this.state.loading, className: 'btn btn-success'\n                            },\n                            '\\u4FDD\\u5B58'\n                        )\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    'div',\n                    { className: 'form-group' },\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'label',\n                        { className: 'col-sm-2 control-label' },\n                        '\\u5BC6\\u7801'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'label',\n                        { className: 'col-sm-2 control-label text-left' },\n                        '******'\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-2' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'button',\n                            {\n                                type: 'button', onClick: this.showPassForm,\n                                className: 'btn btn-success'\n                            },\n                            this.state.showPassForm ? '取消' : '修改密码'\n                        )\n                    )\n                ),\n                this.state.showPassForm ? __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    'div',\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'form-group' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'label',\n                            { htmlFor: 'inputPass', className: 'col-sm-2 control-label' },\n                            '\\u5F53\\u524D\\u5BC6\\u7801'\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'div',\n                            { className: 'col-sm-2' },\n                            __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('input', {\n                                type: 'password', id: 'inputPass', className: 'form-control',\n                                onChange: this.inputChange.bind(this, \"pass\"),\n                                value: this.state.pass\n                            })\n                        )\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'form-group' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'label',\n                            { htmlFor: 'inputNewPass', className: 'col-sm-2 control-label' },\n                            '\\u65B0\\u5BC6\\u7801'\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'div',\n                            { className: 'col-sm-2' },\n                            __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('input', {\n                                type: 'password', id: 'inputNewPass', className: 'form-control',\n                                onChange: this.inputChange.bind(this, \"newPass\"),\n                                value: this.state.newPass\n                            })\n                        )\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'form-group' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'label',\n                            {\n                                htmlFor: 'inputConfirmPass',\n                                className: 'col-sm-2 control-label'\n                            },\n                            '\\u786E\\u8BA4\\u65B0\\u5BC6\\u7801'\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'div',\n                            { className: 'col-sm-2' },\n                            __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('input', {\n                                type: 'password', id: 'inputConfirmPass',\n                                className: 'form-control',\n                                onChange: this.inputChange.bind(this, \"confirmPass\"),\n                                value: this.state.confirmPass\n                            })\n                        )\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'form-group' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'div',\n                            { className: 'col-sm-offset-2 col-sm-8' },\n                            __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                                'button',\n                                {\n                                    type: 'button', onClick: this.updateUserPass,\n                                    disabled: this.state.loading, className: 'btn btn-success'\n                                },\n                                '\\u4FDD\\u5B58'\n                            )\n                        )\n                    )\n                ) : null,\n                __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                    'div',\n                    { className: this.state.tip !== \"\" ? 'form-group' : 'hide' },\n                    __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                        'div',\n                        { className: 'col-sm-offset-2 col-sm-8' },\n                        __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(\n                            'div',\n                            { className: 'alert alert-warning' },\n                            this.state.tip\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return UserInfoEditor;\n}(__WEBPACK_IMPORTED_MODULE_6_react___default.a.Component);\n\nvar ProfileEditor = function ProfileEditor() {\n    return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(UserInfoEditor, {\n        email: __WEBPACK_IMPORTED_MODULE_8_global___default.a.user.email,\n        userEdu: __WEBPACK_IMPORTED_MODULE_8_global___default.a.user.edu,\n        userName: __WEBPACK_IMPORTED_MODULE_8_global___default.a.user.name, userId: __WEBPACK_IMPORTED_MODULE_8_global___default.a.user._id\n    });\n};\n\nvar UserStats = function (_React$Component2) {\n    __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(UserStats, _React$Component2);\n\n    function UserStats() {\n        __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, UserStats);\n\n        return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserStats.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(UserStats)).apply(this, arguments));\n    }\n\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(UserStats, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9__common__[\"a\" /* setCurrentNav */])('用户统计', null, true);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__manageuser__[\"d\" /* UserStatistics */], { uid: __WEBPACK_IMPORTED_MODULE_8_global___default.a.user._id });\n        }\n    }]);\n\n    return UserStats;\n}(__WEBPACK_IMPORTED_MODULE_6_react___default.a.Component);\n\n\n\n/***/ }),\n\n/***/ \"./js/user/userlist.jsx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"../node_modules/babel-runtime/core-js/object/get-prototype-of.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/classCallCheck.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/createClass.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(\"../node_modules/babel-runtime/helpers/inherits.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react__ = __webpack_require__(\"../node_modules/react/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_js_quantum__ = __webpack_require__(\"./js/quantum.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_css_main_scss__ = __webpack_require__(\"./css/main.scss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_css_main_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_css_main_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_global__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_global___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_global__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__common__ = __webpack_require__(\"./js/user/common.jsx\");\n\n\n\n\n\n\n\n\n\n\n\nvar UserTr = function (_React$Component) {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(UserTr, _React$Component);\n\n    function UserTr() {\n        __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, UserTr);\n\n        return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserTr.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(UserTr)).apply(this, arguments));\n    }\n\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(UserTr, [{\n        key: \"getPermDesc\",\n        value: function getPermDesc(perm) {\n            return __WEBPACK_IMPORTED_MODULE_9__common__[\"d\" /* UserPermission */].kAll[perm];\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _this2 = this;\n\n            var user = this.props.user;\n            this.currentUser = __WEBPACK_IMPORTED_MODULE_8_global___default.a.user;\n            var validClass = user.valid ? \"label label-success\" : \"label label-warning\";\n            return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                \"tr\",\n                null,\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                        \"a\",\n                        { href: \"/user/\" + user._id },\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\"i\", { className: \"glyphicon glyphicon-user\" }),\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            \"span\",\n                            null,\n                            user.name\n                        )\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                        \"a\",\n                        { href: \"/user/\" + user._id },\n                        user.email\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                        \"span\",\n                        { className: validClass },\n                        user.valid ? \"Active\" : \"Banned\"\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    \"td\",\n                    { className: \"permissions-container\" },\n                    user.permissions.map(function (permi, i) {\n                        return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            \"span\",\n                            { key: i },\n                            _this2.getPermDesc(permi)\n                        );\n                    })\n                ),\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                        \"span\",\n                        null,\n                        __WEBPACK_IMPORTED_MODULE_9__common__[\"b\" /* UserRole */].kDescDict[user.role]\n                    )\n                ),\n                this.props.showOp ? __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    \"td\",\n                    null,\n                    __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                        \"a\",\n                        { href: \"/user/\" + user._id + \"/statistics\" },\n                        \"\\u67E5\\u770B\\u5DE5\\u4F5C\\u91CF\"\n                    )\n                ) : null\n            );\n        }\n    }]);\n\n    return UserTr;\n}(__WEBPACK_IMPORTED_MODULE_5_react___default.a.Component);\n\nvar UserList = function (_React$Component2) {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(UserList, _React$Component2);\n\n    function UserList(props) {\n        __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, UserList);\n\n        var _this3 = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (UserList.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(UserList)).call(this, props));\n\n        _this3.state = {\n            users: []\n        };\n        _this3.currentUser = __WEBPACK_IMPORTED_MODULE_8_global___default.a.user;\n        return _this3;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(UserList, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9__common__[\"a\" /* setCurrentNav */])('用户列表');\n            this.init();\n        }\n    }, {\n        key: \"init\",\n        value: function init() {\n            var _this4 = this;\n\n            __WEBPACK_IMPORTED_MODULE_6_js_quantum__[\"a\" /* default */].get(\"/api/users\", { query: { format: \"json\" } }).done(function (data) {\n                _this4.setState({\n                    users: data\n                });\n            });\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var permissions = __WEBPACK_IMPORTED_MODULE_8_global___default.a.user.permissions.filter(function (p) {\n                return p < 200;\n            });\n            var showOp = permissions.length > 0; // 隐藏操作列\n            return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                \"div\",\n                { id: \"users-list\" },\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    \"div\",\n                    { className: \"userlist-container\" },\n                    __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                        \"table\",\n                        { className: \"table table-wrapper\" },\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            \"thead\",\n                            null,\n                            __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                                \"tr\",\n                                null,\n                                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                                    \"th\",\n                                    null,\n                                    \"\\u7528\\u6237\\u540D\"\n                                ),\n                                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                                    \"th\",\n                                    null,\n                                    \"\\u90AE\\u7BB1\"\n                                ),\n                                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                                    \"th\",\n                                    null,\n                                    \"\\u72B6\\u6001\"\n                                ),\n                                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                                    \"th\",\n                                    null,\n                                    \"\\u6743\\u9650\"\n                                ),\n                                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                                    \"th\",\n                                    null,\n                                    \"\\u89D2\\u8272\"\n                                ),\n                                showOp ? __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                                    \"th\",\n                                    null,\n                                    \"\\u64CD\\u4F5C\"\n                                ) : null\n                            )\n                        ),\n                        __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                            \"tbody\",\n                            null,\n                            this.state.users.map(function (user) {\n                                return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(UserTr, { key: user._id, user: user, showOp: showOp });\n                            })\n                        )\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(\n                    \"a\",\n                    { role: \"button\", className: \"btn btn-success\", href: \"/admin/adduser\" },\n                    \"\\u6DFB\\u52A0\\u7528\\u6237\"\n                )\n            );\n        }\n    }]);\n\n    return UserList;\n}(__WEBPACK_IMPORTED_MODULE_5_react___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (UserList);\n\n/***/ }),\n\n/***/ 0:\n/***/ (function(module, exports) {\n\nmodule.exports = jQuery;\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports) {\n\nmodule.exports = Immutable;\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, exports) {\n\nmodule.exports = Global;\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports) {\n\nmodule.exports = Raven;\n\n/***/ })\n\n},[\"./js/user/entry.jsx\"]);\n\n\n// WEBPACK FOOTER //\n// user.js","import { setNavBar, NavItem } from 'js/nav';\r\nimport Global from \"global\";\r\n\r\nexport function setCurrentNav(current, uid, profile = false) {\r\n    let navItems = null;\r\n    if (uid) {\r\n        navItems = [\r\n            new NavItem('用户列表', '/users'),\r\n            new NavItem('全体统计', '/users/statistics'),\r\n            new NavItem('添加', '/admin/adduser'),\r\n            new NavItem('编辑', `/user/${uid}`),\r\n        ];\r\n        const permissions = Global.user.permissions.filter(p => p < 200);\r\n        if (permissions.length) {\r\n            navItems.push(new NavItem('用户统计', `/user/${uid}/statistics`));\r\n            navItems.push(new NavItem('最近操作', `/user/${uid}/op_logs/recent`));\r\n        }\r\n    } else if (profile) {\r\n        navItems = [\r\n            new NavItem('修改信息', '/profile'),\r\n        ];\r\n            // 不包含数学部权限的不显示用户统计\r\n        const permissions = Global.user.permissions.filter(p => p < 200);\r\n        if (permissions.length) {\r\n            navItems.push(new NavItem('用户统计', '/profile/statistics'));\r\n            navItems.push(new NavItem('最近操作', '/profile/op_logs/recent'));\r\n        }\r\n    } else {\r\n        navItems = [\r\n            new NavItem('用户列表', '/users'),\r\n            new NavItem('全体统计', '/users/statistics'),\r\n            new NavItem('添加', '/admin/adduser'),\r\n        ];\r\n    }\r\n    setNavBar(navItems, current);\r\n}\r\n\r\nexport class UserRole {\r\n    static isAdmin(role) {\r\n        return role === UserRole.kAdmin;\r\n    }\r\n}\r\n\r\nUserRole.kDescDict = {\r\n    1: '管理员',\r\n    10: '用户',\r\n};\r\n\r\nUserRole.kAdmin = 1;\r\nUserRole.kUser = 10;\r\n\r\nexport class UserModule {}\r\nUserModule.kAllModules = [\r\n    { code: 1, desc: '数学部' },\r\n];\r\nUserModule.kDescDict = {};\r\nUserModule.kAllModules.forEach((item) => { UserModule.kDescDict[item.code] = item.desc; });\r\nUserModule.kMathDepartment = 1;\r\nexport class UserPermission {\r\n    static getPermissionsByModule(module) {\r\n        if (module === UserModule.kMathDepartment) {\r\n            return UserPermission.kMathDepartment;\r\n        }\r\n        return null;\r\n    }\r\n}\r\nUserPermission.kMathDepartment = [\r\n    { code: 102, desc: '题目查询' },\r\n    { code: 103, desc: '试卷编辑' },\r\n    { code: 104, desc: '录入' },\r\n];\r\n\r\nUserPermission.kAll = {};\r\n[].concat(UserPermission.kMathDepartment).forEach(\r\n    (item) => { UserPermission.kAll[item.code] = item.desc; });\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/user/common.jsx","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport { Router, Route, browserHistory } from 'react-router';\r\nimport UserList from './userlist';\r\nimport { AddUser, UpdateUser, UserStatisticsPage } from './manageuser';\r\nimport { ProfileEditor, UserStats } from './userinfo';\r\nimport { UserLogin } from './login';\r\nimport { ProfileRecentOpLogsPage, UserRecentOpLogsPage } from './oplogs';\r\nimport { UsersStatisticsPage } from './stats';\r\n\r\nReactDom.render((\r\n    <Router history={browserHistory}>\r\n        <Route path='/users' component={UserList} />\r\n        <Route path='/users/statistics' component={UsersStatisticsPage} />\r\n        <Route path='/admin/adduser' component={AddUser} />\r\n        <Route path='/user/:id' component={UpdateUser} />\r\n        <Route path='/user/:id/statistics' component={UserStatisticsPage} />\r\n        <Route path='/user/:id/op_logs/recent' component={UserRecentOpLogsPage} />\r\n        <Route path='/profile' component={ProfileEditor} />\r\n        <Route path='/profile/statistics' component={UserStats} />\r\n        <Route path='/profile/op_logs/recent' component={ProfileRecentOpLogsPage} />\r\n        <Route path='/auth/login' component={UserLogin} />\r\n    </Router>\r\n), document.getElementById('main')\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/user/entry.jsx","import React from 'react';\r\nimport Q from \"js/quantum\";\r\nimport \"css/main.scss\";\r\nimport config from '../../../config'\r\nexport class UserLogin extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            email: window.localStorage.getItem('loginName') || '',\r\n            pass: '',\r\n            capacha: '',\r\n            remember: true,\r\n            ajaxing: false,\r\n            imgSrc: this.genImgSrc()\r\n        };\r\n        this._refEmail = null;\r\n        this._refPass = null;\r\n        this._autoFocusInput = this.state.email ? 'pass' : 'email';\r\n    }\r\n    \r\n//  componentWillMount(){\r\n//  \tlocalStorage.removeItem('res_str');\r\n//  }\r\n\r\n    componentDidMount() {\r\n        if (this.state.email) {\r\n            this._refPass.focus();\r\n        } else {\r\n            this._refEmail.focus();\r\n        }\r\n    }\r\n\r\n    handleChange(evt) {\r\n        const value = evt.target.type === 'checkbox' ? evt.target.checked : evt.target.value;\r\n        this.setState({ [evt.target.name]: value });\r\n    }\r\n    genImgSrc = () => {\r\n        let server = `http://${config[process.env.NODE_ENV]['proxy']['math']['host']}:${config[process.env.NODE_ENV]['proxy']['math']['port']}`;\r\n        return `${server}/auth/verifycode?num=${Math.random()}`\r\n    }\r\n    refreshCode() {\r\n        this.codeImg.setAttribute('src', this.genImgSrc())\r\n    }\r\n    login(evt) {\r\n        evt.preventDefault();\r\n        this.setState({ ajaxing: true });\r\n        Q.post('/auth/login', { json: this.state })\r\n        .done((res) => {\r\n            window.localStorage.setItem('loginName', this.state.email);\r\n            localStorage.setItem('token', res.authorization);\r\n            Q.get('/user/current_user').done(res => {\r\n                window.localStorage.setItem('user', encodeURIComponent(JSON.stringify(res.g.user)));\r\n                location.href = this.props.location.query.next_url || '/';\r\n            }).fail(this.loginError)\r\n        })\r\n        .fail(this.loginError)\r\n        .always(() => {\r\n            this.setState({ ajaxing: false });\r\n        });\r\n    }\r\n    loginError =()=> {\r\n        this._refPass.focus();\r\n        this.setState({ pass: '' });\r\n        this.refreshCode();\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"login-page\">\r\n                <div className=\"login-header\">\r\n                    <div className=\"logo-wrapper\">\r\n                        <img src=\"http://sealimg.youneng.com/static/img/logo/logo_s.png\" />\r\n                    </div>\r\n                    <div className=\"sys-name-wrapper\">\r\n                        <img src=\"http://sealimg.youneng.com/static/img/logo/318x80_n.png\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"login-body\">\r\n                    <form id=\"login-form\" className=\"\" onSubmit={this.login.bind(this)}>\r\n                        <div className=\"form-row\">\r\n                            <input\r\n                                type=\"email\" name=\"email\" className=\"form-control\"\r\n                                placeholder=\"用户名\" required\r\n                                value={this.state.email}\r\n                                onChange={this.handleChange.bind(this)}\r\n                                ref={(c) => { this._refEmail = c; }} key=\"email\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-row\">\r\n                            <input\r\n                                type=\"password\" name=\"pass\" className=\"form-control\" required\r\n                                placeholder=\"密码\"\r\n                                value={this.state.pass} onChange={this.handleChange.bind(this)}\r\n                                ref={(c) => { this._refPass = c; }} key=\"pass\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-row\">\r\n                            <div className=\"capacha\">\r\n                                <input\r\n                                    type=\"text\" name=\"capacha\" className=\"form-control text\" required\r\n                                    placeholder=\"验证码\"\r\n                                    value={this.state.capacha} onChange={this.handleChange.bind(this)}\r\n                                />\r\n                                <img src={this.state.imgSrc} alt=\"\" ref={ref=> this.codeImg=ref} onClick={this.refreshCode.bind(this)}/>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"form-row\">\r\n                            <label className=\"checkbox-inline remember\" >\r\n                                <input\r\n                                    type=\"checkbox\" name=\"remember\" checked={this.state.remember}\r\n                                    onChange={this.handleChange.bind(this)}\r\n                                />\r\n                                <span>记住我</span>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"form-row\">\r\n                            <button\r\n                                className=\"btn btn-primary btn-lg\" type=\"submit\"\r\n                            >登录</button>\r\n                            <div className=\"forget-pass hide\">\r\n                                <a href=\"#\" data-action=\"forget-pass\">\r\n                                    忘记密码\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/user/login.jsx","import React from 'react';\r\nimport { Q, Qdate, Edu, EduDesc } from \"js/quantum\";\r\nimport Immutable from 'immutable';\r\nimport { sprintf } from 'sprintf-js';\r\nimport Global from 'global';\r\nimport { setCurrentNav, UserRole, UserModule, UserPermission } from './common';\r\n\r\nclass UserInfo extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tip: \"\",\r\n        };\r\n        this.isAdd = this.props.opType === \"addUser\";\r\n        this.currentUser = Global.user;\r\n        this.setBind();\r\n    }\r\n    componentDidMount() {\r\n        if (this.isAdd) {\r\n            setCurrentNav('添加');\r\n        } else {\r\n            setCurrentNav('编辑', this.props.userId);\r\n        }\r\n        this.init(this.isAdd);\r\n    }\r\n    setTip(tip) {\r\n        this.setState({ tip });\r\n    }\r\n    setBind() {\r\n        this.updateUserInfo = this.updateUserInfo.bind(this);\r\n        this.changeRole = this.changeRole.bind(this);\r\n        this.changePermissions = this.changePermissions.bind(this);\r\n        this.banUser = this.banUser.bind(this);\r\n        this.addUser = this.addUser.bind(this);\r\n        this.changeEdu = this.changeEdu.bind(this);\r\n        this.submit = this.submit.bind(this);\r\n    }\r\n    setUser(key, value) {\r\n        const user = this.state.user.set(key, value);\r\n        this.setState({ user });\r\n    }\r\n    init(isAdd) {\r\n        if (isAdd) {\r\n            const user = {\r\n                email: \"\",\r\n                name: \"\",\r\n                pass: \"\",\r\n                edu: Edu.kDefault,\r\n                role: UserRole.kUser,\r\n                permissions: [],\r\n            };\r\n            this.setState({ user: Immutable.fromJS(user) });\r\n        } else {\r\n            Q.get(`/api/user/${this.props.userId}`, { query: { format: \"json\" } })\r\n            .done((res) => {\r\n                this.setState({\r\n                    user: Immutable.fromJS(res),\r\n                });\r\n            });\r\n        }\r\n    }\r\n    inputChange(key, evt) {\r\n        const value = evt.target.value;\r\n        this.setUser(key, value);\r\n    }\r\n    changeRole(evt) {\r\n        const value = parseInt(evt.target.value, 10);\r\n        this.setUser('role', value);\r\n    }\r\n    changeEdu(evt) {\r\n        const value = parseInt(evt.target.value, 10);\r\n        const edu = this.state.user.get('edu');\r\n        if (edu !== value) {\r\n            this.setUser('edu', value);\r\n        }\r\n    }\r\n    changePermissions(evt) {\r\n        const value = parseInt(evt.target.value, 10);\r\n        let permissions = this.state.user.get('permissions');\r\n        if (permissions.indexOf(value) !== -1) {\r\n            permissions = permissions.delete(permissions.indexOf(value));\r\n        } else {\r\n            permissions = permissions.push(value);\r\n        }\r\n        this.setUser('permissions', permissions);\r\n    }\r\n    banUser() {\r\n        this.updateUser({ valid: !this.state.user.get(\"valid\") });\r\n    }\r\n    submit(evt) {\r\n        evt.preventDefault();\r\n        if (this.isAdd) {\r\n            return this.addUser(evt);\r\n        } else {\r\n            return this.updateUserInfo(evt);\r\n        }\r\n    }\r\n    updateUser(data, success) {\r\n        this.setState({ loading: true });\r\n        Q.post(`/api/user/${this.props.userId}`, { json: { update: data } })\r\n        .done((res) => {\r\n            this.setState({\r\n                user: Immutable.fromJS(res),\r\n            });\r\n            if (success) {\r\n                success();\r\n            }\r\n        })\r\n        .always(() => {\r\n            this.setState({ loading: false });\r\n        });\r\n    }\r\n    updateUserInfo() {\r\n        const user = this.state.user;\r\n        const pass = user.get(\"pass\");\r\n        if (pass && (pass.length < 6 || pass.length > 32)) {\r\n            this.setTip(\"密码需要6～32位！\");\r\n            return;\r\n        }\r\n        this.setTip(\"\");\r\n        const data = {\r\n            name: user.get(\"name\"),\r\n            role: user.get(\"role\"),\r\n            edu: user.get('edu'),\r\n            permissions: user.get('permissions'),\r\n            module: UserModule.kMathDepartment,\r\n        };\r\n        if (pass) {\r\n            data.pass = pass;\r\n        }\r\n        this.updateUser(data, () => { Q.alert(\"信息更新成功！\"); });\r\n    }\r\n    addUser() {\r\n        const user = this.state.user;\r\n        if (!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/.test(user.get(\"email\"))) {\r\n            this.setTip(\"不是合法的Email！\");\r\n            return;\r\n        }\r\n\r\n        const data = {\r\n            email: user.get(\"email\"),\r\n            name: user.get(\"name\"),\r\n            role: user.get(\"role\"),\r\n            pass: user.get('pass'),\r\n            edu: user.get(\"edu\"),\r\n            permissions: user.get('permissions'),\r\n            module: UserModule.kMathDepartment,\r\n        };\r\n        this.setState({ loading: true });\r\n        Q.put('/api/users', { json: data })\r\n        .done(() => {\r\n            Q.alert(\"添加成功\");\r\n            location.href = \"/users\";\r\n        })\r\n        .always(() => {\r\n            this.setState({ loading: false });\r\n        });\r\n    }\r\n    render() {\r\n        if (!this.state.user) {\r\n            return (\r\n                <div>数据加载中....</div>\r\n            );\r\n        }\r\n        return (\r\n            <form id=\"userinfo-form\" className=\"form-horizontal\" onSubmit={this.submit}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputEmail\" className=\"col-sm-2 control-label\">邮箱</label>\r\n                    <div className=\"col-sm-8\">\r\n                        <input\r\n                            type=\"email\" id=\"inputEmail\" className=\"form-control\"\r\n                            disabled={!this.isAdd}\r\n                            value={this.state.user.get('email')}\r\n                            onChange={this.inputChange.bind(this, \"email\")}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputUserName\" className=\"col-sm-2 control-label\">用户名</label>\r\n                    <div className=\"col-sm-8\">\r\n                        <input\r\n                            type=\"text\" id=\"inputUserName\" className=\"form-control\"\r\n                            onChange={this.inputChange.bind(this, \"name\")}\r\n                            value={this.state.user.get('name')}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"form-group\"}>\r\n                    <label htmlFor=\"inputPass\" className=\"col-sm-2 control-label\">密码</label>\r\n                    <div className=\"col-sm-8\">\r\n                        <input\r\n                            type=\"password\" id=\"inputPass\" className=\"form-control\"\r\n                            required={this.isAdd}\r\n                            onChange={this.inputChange.bind(this, \"pass\")}\r\n                            value={this.state.user.get('pass') || ''}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                { UserRole.isAdmin(this.currentUser.role) ? (\r\n                    <AdminEdu\r\n                        edu={this.state.user.get('edu')}\r\n                        changeEdu={this.changeEdu}\r\n                    />) : null}\r\n                { UserRole.isAdmin(this.currentUser.role) && (\r\n                    this.state.user.get('_id') !== this.currentUser._id) ? (\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"inputRole\" className=\"col-sm-2 control-label\">角色</label>\r\n                            <div className=\"col-sm-8\">\r\n                                <select\r\n                                    className=\"form-control\" value={this.state.user.get('role')}\r\n                                    onChange={this.changeRole}\r\n                                >\r\n                                    <option value=\"10\">普通用户</option>\r\n                                    <option value=\"1\">管理员</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>) : null}\r\n                { UserRole.isAdmin(this.currentUser.role) ? (\r\n                    <Permissions\r\n                        user={this.currentUser}\r\n                        permissions={this.state.user.get('permissions')}\r\n                        changePermissions={this.changePermissions}\r\n                    />) : null}\r\n                <div className={!this.isAdd ? \"form-group\" : \"hide\"}>\r\n                    <div className=\"col-sm-offset-2 col-sm-8\">\r\n                        <span\r\n                            className={this.state.user.get('valid') ?\r\n                            \"label label-success\" : \"label label-warning\"}\r\n                        >\r\n                            {this.state.user.get('valid') ? \"Active\" : \"Banned\"}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div className={this.state.tip !== \"\" ? 'form-group' : 'hide'}>\r\n                    <div className=\"col-sm-offset-2 col-sm-8\">\r\n                        <div className=\"alert alert-warning\">\r\n                            {this.state.tip}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={\"form-group\"}>\r\n                    <div className=\"col-sm-offset-2 col-sm-8\">\r\n                        <button\r\n                            type=\"submit\" disabled={this.state.loading} className=\"btn btn-success\"\r\n                        >保存</button>\r\n                        &nbsp;&nbsp;\r\n                        <button\r\n                            type=\"button\" onClick={this.banUser} disabled={this.state.loading}\r\n                            className={`btn btn-danger ${this.isAdd ? 'hide' : ''}`}\r\n                        >{this.state.user.get('valid') ? \"禁用\" : \"激活\"}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nfunction AdminEdu(props) {\r\n    return (\r\n        <div className=\"form-group\">\r\n            <label htmlFor=\"inputEdu\" className=\"col-sm-2 control-label\">级段</label>\r\n            <div className=\"col-sm-8\">\r\n                <select\r\n                    className=\"form-control\" value={props.edu}\r\n                    onChange={props.changeEdu}\r\n                >\r\n                    {EduDesc.kAll.map(eduDesc =>\r\n                        <option value={eduDesc.edu}>{eduDesc.name}</option>)}\r\n                </select>\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nfunction Permissions(props) {\r\n    const user = props.user;\r\n    const checkedPermissions = props.permissions;\r\n    if (!user.module) {\r\n        return null;\r\n    }\r\n    const permissions = UserPermission.getPermissionsByModule(user.module);\r\n\r\n    return (\r\n        <div className=\"form-group\">\r\n            <label className=\"col-sm-2 control-label\">权限</label>\r\n            <div className=\"col-sm-8\">\r\n                {\r\n                    permissions.map((perm, i) =>\r\n                        <label className=\"checkbox-inline\" key={i}>\r\n                            <input\r\n                                type=\"checkbox\" value={perm.code}\r\n                                checked={checkedPermissions.indexOf(perm.code) !== -1}\r\n                                onChange={props.changePermissions}\r\n                            />{perm.desc}\r\n                        </label>\r\n                    )\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nclass UserStatistics extends React.Component {\r\n    static defaultDateRange() {\r\n        const today = new Date();\r\n        const monthFirst = new Date(today.getFullYear(), today.getMonth(), 1);\r\n        return [UserStatistics.formatDate(monthFirst), UserStatistics.formatDate(today)];\r\n    }\r\n\r\n    static formatDate(dt) {\r\n        return sprintf(`%04d-%02d-%02d`, dt.getFullYear(), dt.getMonth() + 1, dt.getDate());\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dataReady: false,\r\n            statistics: {},\r\n        };\r\n        this.setBind();\r\n    }\r\n    componentDidMount() {\r\n        this.search(...UserStatistics.defaultDateRange());\r\n        this.loadUserInfo();\r\n    }\r\n    setBind() {\r\n        this.search = this.search.bind(this);\r\n    }\r\n    loadUserInfo() {\r\n        Q.get(`/api/user/${this.props.uid}`)\r\n        .done((user) => {\r\n            this.user = user;\r\n            this.setState({\r\n                dataReady: true,\r\n            });\r\n        });\r\n    }\r\n    search(start, end) {\r\n        const query = {};\r\n        if (start) {\r\n            query.start = `${start} 00:00`;\r\n        }\r\n        if (end) {\r\n            query.end = `${end} 23:59`;\r\n        }\r\n        Q.get(`/api/user/${this.props.uid}/statistics`, { query })\r\n        .done((data) => {\r\n            this.setState({\r\n                statistics: data,\r\n            });\r\n        });\r\n    }\r\n    render() {\r\n        if (!this.state.dataReady) {\r\n            return null;\r\n        }\r\n        const statistics = this.state.statistics;\r\n        return (\r\n            <div id=\"user-statistics\">\r\n                <div className=\"panel panel-default\">\r\n                    <div className=\"panel-heading\">\r\n                        <span>{this.user.name || this.user.email}的工作量</span>\r\n                    </div>\r\n                    <div className=\"panel-body\">\r\n                        <div className=\"search-bar-wrapper\">\r\n                            <UserStatSearchBar\r\n                                defaultDateRange={UserStatistics.defaultDateRange()}\r\n                                searchCallback={this.search}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <table className=\"table table-striped table-hover\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>用户</th>\r\n                                        <th>创建题目</th>\r\n                                        <th>排版题目</th>\r\n                                        <th>标注题目</th>\r\n                                        <th>创建Volume</th>\r\n                                        <th>Volume题目数</th>\r\n                                        <th>标注</th>\r\n                                        <th>审核</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td><span>{this.user.name || this.user.email}</span></td>\r\n                                        <td><span>{statistics.create}</span></td>\r\n                                        <td><span>{statistics.typeset}</span></td>\r\n                                        <td><span>{statistics.tag}</span></td>\r\n                                        <td><span>{statistics.volume}</span></td>\r\n                                        <td><span>{statistics.volume_items}</span></td>\r\n                                        <td><span>{statistics.review_tag}</span></td>\r\n                                        <td><span>{statistics.review_typeset}</span></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass UserStatisticsPage extends React.Component {\r\n    componentDidMount() {\r\n        setCurrentNav('用户统计', this.props.params.id);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <UserStatistics uid={this.props.params.id} />\r\n        );\r\n    }\r\n}\r\n\r\nexport class UserStatSearchBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            start: props.defaultDateRange[0],\r\n            end: props.defaultDateRange[1],\r\n        };\r\n        this.setBind();\r\n    }\r\n\r\n    setBind() {\r\n        this.changeHandler = this.changeHandler.bind(this);\r\n    }\r\n\r\n    changeHandler(key, evt) {\r\n        this.setState({\r\n            [key]: evt.target.value,\r\n        });\r\n    }\r\n\r\n    quickSearch(rangeName) {\r\n        let range = [new Date(), new Date()];\r\n        switch (rangeName) {\r\n        case 'yesterday':\r\n            range = [\r\n                new Date(new Date().getTime() - (86400 * 1000)),\r\n                new Date(new Date().getTime() - (86400 * 1000)),\r\n            ];\r\n            break;\r\n        case 'thisweek':\r\n            range = [\r\n                Qdate.weekFirst(),\r\n                new Date(),\r\n            ];\r\n            break;\r\n        case 'lastweek':\r\n            range = [\r\n                Qdate.weekFirst(new Date(Qdate.weekFirst().getTime() - 1)),\r\n                new Date(Qdate.weekFirst(\r\n                    new Date(Qdate.weekFirst().getTime() - 1)).getTime() + (6 * 86400 * 1000)),\r\n            ];\r\n            break;\r\n        default: break;\r\n        }\r\n        this.setState({\r\n            start: Qdate.dateFormat(range[0]),\r\n            end: Qdate.dateFormat(range[1]),\r\n        }, () => this.props.searchCallback(this.state.start, this.state.end));\r\n    }\r\n    render() {\r\n        return (\r\n            <form className=\"form-inline date-range-form\">\r\n                <div className=\"form-group\">\r\n                    <label>开始时间：</label>\r\n                    <input\r\n                        type=\"date\" className=\"form-control\" value={this.state.start}\r\n                        onChange={this.changeHandler.bind(this, 'start')}\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>结束时间：</label>\r\n                    <input\r\n                        type=\"date\" className=\"form-control\" value={this.state.end}\r\n                        onChange={this.changeHandler.bind(this, 'end')}\r\n                    />\r\n                </div>\r\n                <button\r\n                    type=\"button\" className=\"btn btn-success\"\r\n                    onClick={() => this.props.searchCallback(this.state.start, this.state.end)}\r\n                >查询</button>\r\n                <button\r\n                    type=\"button\" className=\"btn btn-default\"\r\n                    onClick={this.quickSearch.bind(this, 'today')}\r\n                >今天</button>\r\n                <button\r\n                    type=\"button\" className=\"btn btn-default\"\r\n                    onClick={this.quickSearch.bind(this, 'yesterday')}\r\n                >昨天</button>\r\n                <button\r\n                    type=\"button\" className=\"btn btn-default\"\r\n                    onClick={this.quickSearch.bind(this, 'thisweek')}\r\n                >本周</button>\r\n                <button\r\n                    type=\"button\" className=\"btn btn-default\"\r\n                    onClick={this.quickSearch.bind(this, 'lastweek')}\r\n                >上周</button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nconst AddUser = function () {\r\n    return (\r\n        <UserInfo opType=\"addUser\" />\r\n    );\r\n};\r\n\r\nconst UpdateUser = function (props) {\r\n    return (\r\n        <UserInfo opType=\"updateUser\" userId={props.params.id} />\r\n    );\r\n};\r\n\r\nexport { AddUser, UpdateUser, UserStatistics, UserStatisticsPage };\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/user/manageuser.jsx","import React from 'react';\r\nimport Immutable from 'immutable';\r\nimport Q from 'js/quantum';\r\nimport Global from 'global';\r\nimport { setCurrentNav } from './common';\r\n\r\nexport class RecentOplogs extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            opLogs: null,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        Q.get(`/api/user/${this.props.uid}/op_logs/recent`, { query: { days: this.props.days } })\r\n        .done((results) => { this.setState({ opLogs: Immutable.fromJS(results) }); });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.opLogs === null) {\r\n            return <div className='loading'>正在加载中...</div>;\r\n        }\r\n        return (\r\n            <table className=\"table table-hover\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>序号</th>\r\n                        <th>时间</th>\r\n                        <th>类型</th>\r\n                        <th>ID</th>\r\n                        <th>操作</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    { this.state.opLogs.map((opLog, index) =>\r\n                        <OpLog index={index} opLog={opLog} key={index} />) }\r\n                </tbody>\r\n            </table>\r\n        );\r\n    }\r\n}\r\n\r\nfunction OpLog({ opLog, index }) {\r\n    return (\r\n        <tr>\r\n            <td>{index + 1}</td>\r\n            <td>{new Date(opLog.get('ctime') * 1000).toLocaleString()}</td>\r\n            <td>{opLog.get('obj_type')}</td>\r\n            <td>\r\n                <a href={`/${opLog.get('obj_type')}/${opLog.get('obj_id')}`} target='_blank'>\r\n                    {opLog.get('obj_id')}\r\n                </a>\r\n            </td>\r\n            <td>{opLog.get('type')}</td>\r\n        </tr>\r\n    );\r\n}\r\n\r\nexport class ProfileRecentOpLogsPage extends React.Component {\r\n    componentDidMount() {\r\n        setCurrentNav('最近操作', null, true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"my-recent-op-logs\">\r\n                <h3>最近{this.props.days}天的操作</h3>\r\n                <RecentOplogs uid={Global.user._id} days={this.props.days} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nProfileRecentOpLogsPage.defaultProps = {\r\n    days: 7,\r\n};\r\n\r\nexport class UserRecentOpLogsPage extends React.Component {\r\n    componentDidMount() {\r\n        setCurrentNav('最近操作', this.props.params.id, false);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"user-recent-op-logs\">\r\n                <h3>最近{this.props.days}天的操作</h3>\r\n                <RecentOplogs uid={this.props.params.id} days={this.props.days} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nUserRecentOpLogsPage.defaultProps = {\r\n    days: 7,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/user/oplogs.jsx","import React from 'react';\r\nimport { Q, Qdate } from \"js/quantum\";\r\nimport \"css/main.scss\";\r\nimport { UserStatSearchBar } from './manageuser';\r\nimport { setCurrentNav } from './common';\r\n\r\n\r\nexport class UsersStatisticsPage extends React.Component {\r\n    static defaultDateRange() {\r\n        return [Qdate.dateFormat(new Date()), Qdate.dateFormat(new Date())];\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            stats: [],\r\n        };\r\n        this.setBind();\r\n    }\r\n\r\n    componentDidMount() {\r\n        setCurrentNav('全体统计', this.props.params.id);\r\n\r\n        this.search(...UsersStatisticsPage.defaultDateRange());\r\n    }\r\n\r\n    setBind() {\r\n        this.search = this.search.bind(this);\r\n    }\r\n\r\n    search(start, end) {\r\n        const query = {};\r\n        if (start) {\r\n            query.start = Q.dateStrToUnixTime(start) / 1000;\r\n        }\r\n        if (end) {\r\n            query.end = (Q.dateStrToUnixTime(end) / 1000) + 86400;\r\n        }\r\n        Q.get(`/api/users/statistics`, { query })\r\n        .done((data) => {\r\n            this.setState({\r\n                stats: data,\r\n            });\r\n        });\r\n    }\r\n\r\n    _renderTr(stat) {\r\n        return (\r\n            <tr key={stat._id}>\r\n                <td><span>{stat.name}</span></td>\r\n                <td><span>{stat.create}</span></td>\r\n                <td><span>{stat.typeset}</span></td>\r\n                <td><span>{stat.tag}</span></td>\r\n                <td><span>{stat.volume}</span></td>\r\n                <td><span>{stat.volume_items}</span></td>\r\n                <td><span>{stat.review_tag}</span></td>\r\n                <td><span>{stat.review_typeset}</span></td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"user-statistics\">\r\n                <div className=\"panel panel-default\">\r\n                    <div className=\"panel-heading\">\r\n                        <span>全体工作统计</span>\r\n                    </div>\r\n                    <div className=\"panel-body\">\r\n                        <div className=\"search-bar-wrapper\">\r\n                            <UserStatSearchBar\r\n                                defaultDateRange={UsersStatisticsPage.defaultDateRange()}\r\n                                searchCallback={this.search}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <table className=\"table table-striped table-hover\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>用户</th>\r\n                                        <th>创建题目</th>\r\n                                        <th>排版题目</th>\r\n                                        <th>标注题目</th>\r\n                                        <th>创建Volume</th>\r\n                                        <th>Volume题目数</th>\r\n                                        <th>标注</th>\r\n                                        <th>审核</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    { this.state.stats.map(this._renderTr.bind(this)) }\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/user/stats.jsx","import React from 'react';\r\nimport { Q, EduDesc } from \"js/quantum\";\r\nimport Global from 'global';\r\nimport { setCurrentNav } from './common';\r\nimport { UserStatistics } from './manageuser';\r\n\r\nclass UserInfoEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tip: \"\",\r\n            newPass: \"\",\r\n            confirmPass: \"\",\r\n            edu: props.userEdu,\r\n            pass: \"\",\r\n            name: props.userName,\r\n            showPassForm: false,\r\n            loading: false,\r\n        };\r\n        this.setBind();\r\n    }\r\n           \r\n    componentWillMount(){\r\n    \tQ.get(`/api/user/${this.props.userId}`)\r\n        .done((res) => {\r\n        \tthis.setState({\r\n        \t\tedu:res.edu\r\n        \t},()=>{\r\n        \t\tGlobal.user.edu=res.edu;\r\n        \t\tconsole.log(Global.user.edu)\r\n        \t})\r\n        })\r\n    }\r\n    \r\n    componentDidMount() {\r\n        setCurrentNav('修改信息', null, true);\r\n    }\r\n\r\n    setBind() {\r\n        this.showPassForm = this.showPassForm.bind(this);\r\n        this.updateUserName = this.updateUserName.bind(this);\r\n        this.updateUserEdu = this.updateUserEdu.bind(this);\r\n        this.updateUserPass = this.updateUserPass.bind(this);\r\n    }\r\n\r\n    setTip(tip) {\r\n        this.setState({ tip });\r\n    }\r\n\r\n    changeEdu(evt) {\r\n        const value = parseInt(evt.target.value, 10);\r\n        const edu = this.state.edu;\r\n        if (edu !== value) {\r\n            this.setState({ edu: value });\r\n        }\r\n    }\r\n\r\n    inputChange(key, evt) {\r\n        const value = evt.target.value;\r\n        this.setState({ [key]: value });\r\n        const btnStatus = this.state.invalid;\r\n        this.setState({ invalid: btnStatus });\r\n    }\r\n\r\n    showPassForm() {\r\n        this.setState({ showPassForm: !this.state.showPassForm });\r\n    }\r\n\r\n    updateUserName() {\r\n        this.setTip(\"\");\r\n        if (!this.state.name) {\r\n            this.setTip(\"用户名不能为空!\");\r\n            return;\r\n        }\r\n        this.updateUserInfo({ name: this.state.name });\r\n    }\r\n\r\n    updateUserEdu() {\r\n        this.setTip('');\r\n        this.updateUserInfo({ edu: this.state.edu });\r\n        \r\n    }\r\n\r\n    updateUserPass() {\r\n        this.setTip(\"\");\r\n        if (!this.state.pass) {\r\n            this.setTip(\"密码为空!\");\r\n            return;\r\n        }\r\n        if (!this.state.newPass) {\r\n            this.setTip(\"新密码为空!\");\r\n            return;\r\n        }\r\n        if (this.state.newPass.length < 6 || this.state.pass.length < 6 ||\r\n            this.state.newPass.length > 32 || this.state.pass.length > 32) {\r\n            this.setTip(\"密码需要6～32位！\");\r\n            return;\r\n        }\r\n        if (this.state.newPass !== this.state.confirmPass) {\r\n            this.setTip(\"密码输入不一致！\");\r\n            return;\r\n        }\r\n        this.updateUserInfo({ pass: this.state.pass, newPass: this.state.newPass },\r\n            () => {\r\n                this.setState({ showPassForm: false });\r\n                Q.alert(\"信息更新成功\");\r\n            }\r\n        );\r\n    }\r\n\r\n    updateUserInfo(params, successCallback) {\r\n        this.setState({ loading: true });\r\n        this.setTip(\"\");\r\n        Q.post(`/api/user/${this.props.userId}`,\r\n               { json: { update_profile: params } }\r\n        )\r\n        .done((res) => {\r\n//      \tlocalStorage.setItem('eduChange',res.edu)\r\n        \tGlobal.user.edu=res.edu;\r\n        \tconsole.log(Global.user.edu)\r\n        \t\r\n            if (successCallback) {\r\n                successCallback();\r\n            } else {\r\n                Q.alert(\"信息更新成功\");\r\n            }\r\n        })\r\n        .fail(() => {\r\n            this.setState({ pass: \"\", newPass: \"\", confirmPass: \"\" });\r\n        })\r\n        .always(() => {\r\n            this.setState({ loading: false });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form id=\"userinfo-form\" className=\"form-horizontal\">\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputEmail\" className=\"col-sm-2 control-label\">邮箱</label>\r\n                    <label className=\"col-sm-4 control-label text-left\">\r\n                        {this.props.email}\r\n                    </label>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputUserName\" className=\"col-sm-2 control-label\">用户名</label>\r\n                    <div className=\"col-sm-2\">\r\n                        <input\r\n                            type=\"text\" id=\"inputUserName\" className=\"form-control\"\r\n                            onChange={this.inputChange.bind(this, \"name\")}\r\n                            value={this.state.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"col-sm-2\">\r\n                        <button\r\n                            type=\"button\" onClick={this.updateUserName}\r\n                            disabled={this.state.loading} className=\"btn btn-success\"\r\n                        >保存</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputUserEdu\" className=\"col-sm-2 control-label\">级段</label>\r\n                    <div className=\"col-sm-2\">\r\n                        <select\r\n                            id=\"inputUserEdu\"\r\n                            className=\"form-control\"\r\n                            value={this.state.edu}\r\n                            onChange={this.changeEdu.bind(this)}\r\n                        >\r\n                            {EduDesc.kAll.map(eduDesc =>\r\n                                <option\r\n                                    value={eduDesc.edu}\r\n                                    key={eduDesc.edu}\r\n                                >\r\n                                    {eduDesc.name}\r\n                                </option>)}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"col-sm-2\">\r\n                        <button\r\n                            type=\"button\" onClick={this.updateUserEdu}\r\n                            disabled={this.state.loading} className=\"btn btn-success\"\r\n                        >保存</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"col-sm-2 control-label\">密码</label>\r\n                    <label className=\"col-sm-2 control-label text-left\">\r\n                        ******\r\n                    </label>\r\n                    <div className=\"col-sm-2\">\r\n                        <button\r\n                            type=\"button\" onClick={this.showPassForm}\r\n                            className=\"btn btn-success\"\r\n                        >{this.state.showPassForm ? '取消' : '修改密码'}</button>\r\n                    </div>\r\n                </div>\r\n                {\r\n                    this.state.showPassForm ? (\r\n                        <div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"inputPass\" className=\"col-sm-2 control-label\">\r\n                                    当前密码\r\n                                </label>\r\n                                <div className=\"col-sm-2\">\r\n                                    <input\r\n                                        type=\"password\" id=\"inputPass\" className=\"form-control\"\r\n                                        onChange={this.inputChange.bind(this, \"pass\")}\r\n                                        value={this.state.pass}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"inputNewPass\" className=\"col-sm-2 control-label\">新密码\r\n                                </label>\r\n                                <div className=\"col-sm-2\">\r\n                                    <input\r\n                                        type=\"password\" id=\"inputNewPass\" className=\"form-control\"\r\n                                        onChange={this.inputChange.bind(this, \"newPass\")}\r\n                                        value={this.state.newPass}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label\r\n                                    htmlFor=\"inputConfirmPass\"\r\n                                    className=\"col-sm-2 control-label\"\r\n                                >确认新密码</label>\r\n                                <div className=\"col-sm-2\">\r\n                                    <input\r\n                                        type=\"password\" id=\"inputConfirmPass\"\r\n                                        className=\"form-control\"\r\n                                        onChange={this.inputChange.bind(this, \"confirmPass\")}\r\n                                        value={this.state.confirmPass}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <div className=\"col-sm-offset-2 col-sm-8\">\r\n                                    <button\r\n                                        type=\"button\" onClick={this.updateUserPass}\r\n                                        disabled={this.state.loading} className=\"btn btn-success\"\r\n                                    >保存</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>) : null\r\n                }\r\n                <div className={this.state.tip !== \"\" ? 'form-group' : 'hide'}>\r\n                    <div className=\"col-sm-offset-2 col-sm-8\">\r\n                        <div className=\"alert alert-warning\">\r\n                            { this.state.tip }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nconst ProfileEditor = function () {\r\n    return (\r\n        <UserInfoEditor\r\n            email={Global.user.email}\r\n            userEdu={Global.user.edu}\r\n            userName={Global.user.name} userId={Global.user._id}\r\n        />\r\n    );\r\n};\r\n\r\nclass UserStats extends React.Component {\r\n    componentDidMount() {\r\n        setCurrentNav('用户统计', null, true);\r\n    }\r\n\r\n    render() {\r\n        return <UserStatistics uid={Global.user._id} />;\r\n    }\r\n}\r\n\r\nexport { ProfileEditor, UserStats };\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/user/userinfo.jsx","import React from 'react';\r\nimport Q from \"js/quantum\";\r\nimport \"css/main.scss\";\r\nimport Global from 'global';\r\nimport { setCurrentNav, UserRole, UserPermission } from './common';\r\n\r\nclass UserTr extends React.Component {\r\n\r\n    getPermDesc(perm) {\r\n        return UserPermission.kAll[perm];\r\n    }\r\n    render() {\r\n        const user = this.props.user;\r\n        this.currentUser = Global.user;\r\n        const validClass = user.valid ? \"label label-success\" : \"label label-warning\";\r\n        return (\r\n            <tr>\r\n                <td>\r\n                    <a href={`/user/${user._id}`}>\r\n                        <i className=\"glyphicon glyphicon-user\" />\r\n                        <span>{user.name}</span>\r\n                    </a>\r\n                </td>\r\n                <td><a href={`/user/${user._id}`}>{user.email}</a></td>\r\n                <td>\r\n                    {\r\n                        <span className={validClass}>\r\n                            {user.valid ? \"Active\" : \"Banned\"}\r\n                        </span>\r\n                     }\r\n                </td>\r\n                <td className=\"permissions-container\">\r\n                    {\r\n                         user.permissions.map((permi, i) => {\r\n                             return <span key={i}>{this.getPermDesc(permi)}</span>;\r\n                         })\r\n                     }\r\n                </td>\r\n                <td>\r\n                    <span>{UserRole.kDescDict[user.role]}</span>\r\n                </td>\r\n                { this.props.showOp ? (\r\n                    <td><a href={`/user/${user._id}/statistics`}>查看工作量</a></td>) : null\r\n                 }\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nexport default class UserList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n        };\r\n        this.currentUser = Global.user;\r\n    }\r\n    componentDidMount() {\r\n        setCurrentNav('用户列表');\r\n        this.init();\r\n    }\r\n    init() {\r\n        Q.get(\"/api/users\", { query: { format: \"json\" } })\r\n        .done((data) => {\r\n            this.setState({\r\n                users: data,\r\n            });\r\n        });\r\n    }\r\n    render() {\r\n        const permissions = Global.user.permissions.filter(p => p < 200);\r\n        const showOp = permissions.length > 0;   // 隐藏操作列\r\n        return (\r\n            <div id=\"users-list\">\r\n                <div className=\"userlist-container\">\r\n                    <table className=\"table table-wrapper\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>用户名</th>\r\n                                <th>邮箱</th>\r\n                                <th>状态</th>\r\n                                <th>权限</th>\r\n                                <th>角色</th>\r\n                                { showOp ? <th>操作</th> : null}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                this.state.users.map(user =>\r\n                                    <UserTr key={user._id} user={user} showOp={showOp} />)\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <a role=\"button\" className=\"btn btn-success\" href=\"/admin/adduser\">添加用户</a>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/user/userlist.jsx","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 0 2 3","module.exports = Immutable;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Immutable\"\n// module id = 1\n// module chunks = 0 2 3","module.exports = Global;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Global\"\n// module id = 2\n// module chunks = 0 2 3","module.exports = Raven;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Raven\"\n// module id = 4\n// module chunks = 0 2 3"],"sourceRoot":""}