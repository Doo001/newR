webpackJsonp([3],{"./js/portal.jsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("../node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n.n(r),a=n("../node_modules/babel-runtime/helpers/classCallCheck.js"),l=n.n(a),o=n("../node_modules/babel-runtime/helpers/createClass.js"),u=n.n(o),i=n("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n.n(i),d=n("../node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../node_modules/react/index.js"),h=n.n(p),f=n("../node_modules/react-dom/index.js"),b=n.n(f),j=n("./js/quantum.js"),E=n(2),x=n.n(E),_=n("./css/main.scss"),w=(n.n(_),n("../node_modules/react-flexbox-grid/lib/index.js")),v=(n.n(w),function(e){function t(e){l()(this,t);var n=c()(this,(t.__proto__||s()(t)).call(this,e));return n.redirect=function(e){-1!=e.url.indexOf("review")?j.a.get(e.url).done(function(e){e&&(window.location.href=e)}):window.location.href=e.url},n.state={dataReady:!1},n.user=null,n.currentUser=x.a.user,n.urlMap={102:[{url:"/item_search",desc:"单题管理"}],103:[{url:"/paper/create",desc:"试卷管理"}],104:[{url:"/lesson/"+x.a.user.edu,desc:"教案管理"},{url:"/ktags/",desc:"图谱管理"},{url:"/quality",desc:"质量管理"}],0:[{url:"/users",desc:"用户管理"}]},n}return m()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this;j.a.get("/api/user/"+this.props.userId).done(function(t){e.user=t,e.user.role>=10&&1===e.user.permissions.length?1===e.urlMap[e.user.permissions[0]].length&&(window.location.href=e.urlMap[e.user.permissions[0]][0].url):e.setState({dataReady:!0})})}},{key:"render",value:function(){var e=this;if(!this.state.dataReady)return null;var t=[],n=this.user.permissions.sort();return this.user.role<10&&n.push(0),n.forEach(function(n){e.urlMap[n]&&101!==n&&e.urlMap[n].forEach(function(n){t.push(h.a.createElement("a",{className:"module-portal",onClick:function(t){t.stopPropagation(),e.redirect(n)},key:n.url,title:n.title||""},n.desc))})}),h.a.createElement("div",{id:"home-module-portals"},h.a.createElement("div",{className:"contain-main"},h.a.createElement(w.Row,null,h.a.createElement(w.Col,{xs:12,className:"margin-B"},h.a.createElement(w.Row,null,h.a.createElement("h1",null,"尊敬的",this.user.name)),h.a.createElement(w.Row,null,h.a.createElement("h1",null,"欢迎您使用内容系统")))),t),h.a.createElement(w.Row,null,h.a.createElement(w.Col,{xs:12},h.a.createElement(w.Row,{end:"xs"},h.a.createElement(w.Col,{xs:6},h.a.createElement("span",{className:"logo-main"}))))))}}]),t}(h.a.Component));b.a.render(h.a.createElement(v,{userId:x.a.userId}),document.getElementById("main"))},0:function(e,t){e.exports=jQuery},1:function(e,t){e.exports=Immutable},2:function(e,t){e.exports=Global},4:function(e,t){e.exports=Raven}},["./js/portal.jsx"]);
//# sourceMappingURL=portal.js.map